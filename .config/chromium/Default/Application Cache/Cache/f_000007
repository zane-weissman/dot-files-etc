function startStackControl(){requestAnimFrame(startStackControl),checkForNewImages()}function windowVisibilityChange(){void 0!=spaceController&&(document[documentHiddenAttributeName]?(windowVisible=!1,spaceController.SetDrawScreen(!1)):spaceController.SetDrawScreen(!0))}window.Modernizr=function(t,e,n){function o(t){y.cssText=t}function i(t,e){return o(C.join(t+";")+(e||""))}function r(t,e){return typeof t===e}function a(t,e){return!!~(""+t).indexOf(e)}function s(t,e){for(var o in t){var i=t[o];if(!a(i,"-")&&y[i]!==n)return"pfx"==e?i:!0}return!1}function l(t,e,o){for(var i in t){var a=e[t[i]];if(a!==n)return o===!1?t[i]:r(a,"function")?a.bind(o||e):a}return!1}function c(t,e,n){var o=t.charAt(0).toUpperCase()+t.slice(1),i=(t+" "+S.join(o+" ")+o).split(" ");return r(e,"string")||r(e,"undefined")?s(i,e):(i=(t+" "+$.join(o+" ")+o).split(" "),l(i,e,n))}var d,u,h,p="2.8.3",f={},g=!0,m=e.documentElement,v="modernizr",b=e.createElement(v),y=b.style,w=":)",C=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),T="Webkit Moz O ms",S=T.split(" "),$=T.toLowerCase().split(" "),E={},x=[],k=x.slice,R=function(t,n,o,i){var r,a,s,l,c=e.createElement("div"),d=e.body,u=d||e.createElement("body");if(parseInt(o,10))for(;o--;)s=e.createElement("div"),s.id=i?i[o]:v+(o+1),c.appendChild(s);return r=["&#173;",'<style id="s',v,'">',t,"</style>"].join(""),c.id=v,(d?c:u).innerHTML+=r,u.appendChild(c),d||(u.style.background="",u.style.overflow="hidden",l=m.style.overflow,m.style.overflow="hidden",m.appendChild(u)),a=n(c,t),d?c.parentNode.removeChild(c):(u.parentNode.removeChild(u),m.style.overflow=l),!!a},A=function(){function t(t,i){i=i||e.createElement(o[t]||"div"),t="on"+t;var a=t in i;return a||(i.setAttribute||(i=e.createElement("div")),i.setAttribute&&i.removeAttribute&&(i.setAttribute(t,""),a=r(i[t],"function"),r(i[t],"undefined")||(i[t]=n),i.removeAttribute(t))),i=null,a}var o={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return t}(),D={}.hasOwnProperty;h=r(D,"undefined")||r(D.call,"undefined")?function(t,e){return e in t&&r(t.constructor.prototype[e],"undefined")}:function(t,e){return D.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError;var n=k.call(arguments,1),o=function(){if(this instanceof o){var i=function(){};i.prototype=e.prototype;var r=new i,a=e.apply(r,n.concat(k.call(arguments)));return Object(a)===a?a:r}return e.apply(t,n.concat(k.call(arguments)))};return o}),E.flexbox=function(){return c("flexWrap")},E.flexboxlegacy=function(){return c("boxDirection")},E.canvas=function(){var t=e.createElement("canvas");return!!t.getContext&&!!t.getContext("2d")},E.webgl=function(){return!!t.WebGLRenderingContext},E.touch=function(){var n;return"ontouchstart"in t||t.DocumentTouch&&e instanceof DocumentTouch?n=!0:R(["@media (",C.join("touch-enabled),("),v,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(t){n=9===t.offsetTop}),n},E.hashchange=function(){return A("hashchange",t)&&(e.documentMode===n||e.documentMode>7)},E.history=function(){return!!t.history&&!!history.pushState},E.websockets=function(){return"WebSocket"in t||"MozWebSocket"in t},E.rgba=function(){return o("background-color:rgba(150,255,150,.5)"),a(y.backgroundColor,"rgba")},E.hsla=function(){return o("background-color:hsla(120,40%,100%,.5)"),a(y.backgroundColor,"rgba")||a(y.backgroundColor,"hsla")},E.multiplebgs=function(){return o("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(y.background)},E.backgroundsize=function(){return c("backgroundSize")},E.borderimage=function(){return c("borderImage")},E.borderradius=function(){return c("borderRadius")},E.boxshadow=function(){return c("boxShadow")},E.textshadow=function(){return""===e.createElement("div").style.textShadow},E.opacity=function(){return i("opacity:.55"),/^0.55$/.test(y.opacity)},E.cssanimations=function(){return c("animationName")},E.csscolumns=function(){return c("columnCount")},E.cssgradients=function(){var t="background-image:",e="gradient(linear,left top,right bottom,from(#9f9),to(white));",n="linear-gradient(left top,#9f9, white);";return o((t+"-webkit- ".split(" ").join(e+t)+C.join(n+t)).slice(0,-t.length)),a(y.backgroundImage,"gradient")},E.cssreflections=function(){return c("boxReflect")},E.csstransforms=function(){return!!c("transform")},E.csstransforms3d=function(){var t=!!c("perspective");return t&&"webkitPerspective"in m.style&&R("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(e){t=9===e.offsetLeft&&3===e.offsetHeight}),t},E.csstransitions=function(){return c("transition")},E.fontface=function(){var t;return R('@font-face {font-family:"font";src:url("https://")}',function(n,o){var i=e.getElementById("smodernizr"),r=i.sheet||i.styleSheet,a=r?r.cssRules&&r.cssRules[0]?r.cssRules[0].cssText:r.cssText||"":"";t=/src/i.test(a)&&0===a.indexOf(o.split(" ")[0])}),t},E.generatedcontent=function(){var t;return R(["#",v,"{font:0/0 a}#",v,':after{content:"',w,'";visibility:hidden;font:3px/1 a}'].join(""),function(e){t=e.offsetHeight>=3}),t},E.video=function(){var t=e.createElement("video"),n=!1;try{(n=!!t.canPlayType)&&(n=new Boolean(n),n.ogg=t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(o){}return n},E.audio=function(){var t=e.createElement("audio"),n=!1;try{(n=!!t.canPlayType)&&(n=new Boolean(n),n.ogg=t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=t.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(o){}return n},E.localstorage=function(){try{return localStorage.setItem(v,v),localStorage.removeItem(v),!0}catch(t){return!1}};for(var I in E)h(E,I)&&(u=I.toLowerCase(),f[u]=E[I](),x.push((f[u]?"":"no-")+u));return f.addTest=function(t,e){if("object"==typeof t)for(var o in t)h(t,o)&&f.addTest(o,t[o]);else{if(t=t.toLowerCase(),f[t]!==n)return f;e="function"==typeof e?e():e,"undefined"!=typeof g&&g&&(m.className+=" "+(e?"":"no-")+t),f[t]=e}return f},o(""),b=d=null,function(t,e){function n(t,e){var n=t.createElement("p"),o=t.getElementsByTagName("head")[0]||t.documentElement;return n.innerHTML="x<style>"+e+"</style>",o.insertBefore(n.lastChild,o.firstChild)}function o(){var t=b.elements;return"string"==typeof t?t.split(" "):t}function i(t){var e=v[t[g]];return e||(e={},m++,t[g]=m,v[m]=e),e}function r(t,n,o){if(n||(n=e),d)return n.createElement(t);o||(o=i(n));var r;return r=o.cache[t]?o.cache[t].cloneNode():f.test(t)?(o.cache[t]=o.createElem(t)).cloneNode():o.createElem(t),!r.canHaveChildren||p.test(t)||r.tagUrn?r:o.frag.appendChild(r)}function a(t,n){if(t||(t=e),d)return t.createDocumentFragment();n=n||i(t);for(var r=n.frag.cloneNode(),a=0,s=o(),l=s.length;l>a;a++)r.createElement(s[a]);return r}function s(t,e){e.cache||(e.cache={},e.createElem=t.createElement,e.createFrag=t.createDocumentFragment,e.frag=e.createFrag()),t.createElement=function(n){return b.shivMethods?r(n,t,e):e.createElem(n)},t.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+o().join().replace(/[\w\-]+/g,function(t){return e.createElem(t),e.frag.createElement(t),'c("'+t+'")'})+");return n}")(b,e.frag)}function l(t){t||(t=e);var o=i(t);return b.shivCSS&&!c&&!o.hasCSS&&(o.hasCSS=!!n(t,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),d||s(t,o),t}var c,d,u="3.7.0",h=t.html5||{},p=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,g="_html5shiv",m=0,v={};!function(){try{var t=e.createElement("a");t.innerHTML="<xyz></xyz>",c="hidden"in t,d=1==t.childNodes.length||function(){e.createElement("a");var t=e.createDocumentFragment();return"undefined"==typeof t.cloneNode||"undefined"==typeof t.createDocumentFragment||"undefined"==typeof t.createElement}()}catch(n){c=!0,d=!0}}();var b={elements:h.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:u,shivCSS:h.shivCSS!==!1,supportsUnknownElements:d,shivMethods:h.shivMethods!==!1,type:"default",shivDocument:l,createElement:r,createDocumentFragment:a};t.html5=b,l(e)}(this,e),f._version=p,f._prefixes=C,f._domPrefixes=$,f._cssomPrefixes=S,f.hasEvent=A,f.testProp=function(t){return s([t])},f.testAllProps=c,f.testStyles=R,m.className=m.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(g?" js "+x.join(" "):""),f}(this,this.document),function(t,e,n){function o(t){return"[object Function]"==m.call(t)}function i(t){return"string"==typeof t}function r(){}function a(t){return!t||"loaded"==t||"complete"==t||"uninitialized"==t}function s(){var t=v.shift();b=1,t?t.t?f(function(){("c"==t.t?h.injectCss:h.injectJs)(t.s,0,t.a,t.x,t.e,1)},0):(t(),s()):b=0}function l(t,n,o,i,r,l,c){function d(e){if(!p&&a(u.readyState)&&(y.r=p=1,!b&&s(),u.onload=u.onreadystatechange=null,e)){"img"!=t&&f(function(){C.removeChild(u)},50);for(var o in x[n])x[n].hasOwnProperty(o)&&x[n][o].onload()}}var c=c||h.errorTimeout,u=e.createElement(t),p=0,m=0,y={t:o,s:n,e:r,a:l,x:c};1===x[n]&&(m=1,x[n]=[]),"object"==t?u.data=n:(u.src=n,u.type=t),u.width=u.height="0",u.onerror=u.onload=u.onreadystatechange=function(){d.call(this,m)},v.splice(i,0,y),"img"!=t&&(m||2===x[n]?(C.insertBefore(u,w?null:g),f(d,c)):x[n].push(u))}function c(t,e,n,o,r){return b=0,e=e||"j",i(t)?l("c"==e?S:T,t,e,this.i++,n,o,r):(v.splice(this.i++,0,t),1==v.length&&s()),this}function d(){var t=h;return t.loader={load:c,i:0},t}var u,h,p=e.documentElement,f=t.setTimeout,g=e.getElementsByTagName("script")[0],m={}.toString,v=[],b=0,y="MozAppearance"in p.style,w=y&&!!e.createRange().compareNode,C=w?p:g.parentNode,p=t.opera&&"[object Opera]"==m.call(t.opera),p=!!e.attachEvent&&!p,T=y?"object":p?"script":"img",S=p?"script":T,$=Array.isArray||function(t){return"[object Array]"==m.call(t)},E=[],x={},k={timeout:function(t,e){return e.length&&(t.timeout=e[0]),t}};h=function(t){function e(t){var e,n,o,t=t.split("!"),i=E.length,r=t.pop(),a=t.length,r={url:r,origUrl:r,prefixes:t};for(n=0;a>n;n++)o=t[n].split("="),(e=k[o.shift()])&&(r=e(r,o));for(n=0;i>n;n++)r=E[n](r);return r}function a(t,i,r,a,s){var l=e(t),c=l.autoCallback;l.url.split(".").pop().split("?").shift(),l.bypass||(i&&(i=o(i)?i:i[t]||i[a]||i[t.split("/").pop().split("?")[0]]),l.instead?l.instead(t,i,r,a,s):(x[l.url]?l.noexec=!0:x[l.url]=1,r.load(l.url,l.forceCSS||!l.forceJS&&"css"==l.url.split(".").pop().split("?").shift()?"c":n,l.noexec,l.attrs,l.timeout),(o(i)||o(c))&&r.load(function(){d(),i&&i(l.origUrl,s,a),c&&c(l.origUrl,s,a),x[l.url]=2})))}function s(t,e){function n(t,n){if(t){if(i(t))n||(u=function(){var t=[].slice.call(arguments);h.apply(this,t),p()}),a(t,u,e,0,c);else if(Object(t)===t)for(l in s=function(){var e,n=0;for(e in t)t.hasOwnProperty(e)&&n++;return n}(),t)t.hasOwnProperty(l)&&(!n&&!--s&&(o(u)?u=function(){var t=[].slice.call(arguments);h.apply(this,t),p()}:u[l]=function(t){return function(){var e=[].slice.call(arguments);t&&t.apply(this,e),p()}}(h[l])),a(t[l],u,e,l,c))}else!n&&p()}var s,l,c=!!t.test,d=t.load||t.both,u=t.callback||r,h=u,p=t.complete||r;n(c?t.yep:t.nope,!!d),d&&n(d)}var l,c,u=this.yepnope.loader;if(i(t))a(t,0,u,0);else if($(t))for(l=0;l<t.length;l++)c=t[l],i(c)?a(c,0,u,0):$(c)?h(c):Object(c)===c&&s(c,u);else Object(t)===t&&s(t,u)},h.addPrefix=function(t,e){k[t]=e},h.addFilter=function(t){E.push(t)},h.errorTimeout=1e4,null==e.readyState&&e.addEventListener&&(e.readyState="loading",e.addEventListener("DOMContentLoaded",u=function(){e.removeEventListener("DOMContentLoaded",u,0),e.readyState="complete"},0)),t.yepnope=d(),t.yepnope.executeStack=s,t.yepnope.injectJs=function(t,n,o,i,l,c){var d,u,p=e.createElement("script"),i=i||h.errorTimeout;p.src=t;for(u in o)p.setAttribute(u,o[u]);n=c?s:n||r,p.onreadystatechange=p.onload=function(){!d&&a(p.readyState)&&(d=1,n(),p.onload=p.onreadystatechange=null)},f(function(){d||(d=1,n(1))},i),l?p.onload():g.parentNode.insertBefore(p,g)},t.yepnope.injectCss=function(t,n,o,i,a,l){var c,i=e.createElement("link"),n=l?s:n||r;i.href=t,i.rel="stylesheet",i.type="text/css";for(c in o)i.setAttribute(c,o[c]);a||(g.parentNode.insertBefore(i,g),f(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},Modernizr.addTest("cssvhunit",function(){var t;return Modernizr.testStyles("#modernizr { height: 50vh; }",function(e){var n=parseInt(window.innerHeight/2,10),o=parseInt((window.getComputedStyle?getComputedStyle(e,null):e.currentStyle).height,10);t=o==n}),t}),Modernizr.addTest("cssvwunit",function(){var t;return Modernizr.testStyles("#modernizr { width: 50vw; }",function(e){var n=parseInt(window.innerWidth/2,10),o=parseInt((window.getComputedStyle?getComputedStyle(e,null):e.currentStyle).width,10);t=o==n}),t}),function(){if(Modernizr.webgl){var t,e,n;try{t=document.createElement("canvas"),e=t.getContext("webgl")||t.getContext("experimental-webgl"),n=e.getSupportedExtensions()}catch(o){return}Modernizr.webgl=new Boolean(void 0===e?!1:!0);for(var i=-1,r=n.length;++i<r;)Modernizr.webgl[n[i]]=!0;window.TEST&&TEST.audvid&&TEST.audvid.push("webgl"),t=void 0}}(),function(t){t.fn.FormCache=function(e){var n=(t.extend({},e),function(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}}),o=function(t){for(var e=t+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var i=n[o];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(e))return i.substring(e.length,i.length)}return null},i=function(e){var i=t(e.target),r=i.parents("form:first").attr("name"),a=!1;n()&&(a=localStorage[r]?JSON.parse(localStorage[r]):o(r),a||(localStorage[r]=JSON.stringify({}),a=JSON.parse(localStorage[r])),a[i.attr("name")]="checkbox"==i.attr("type")?i.is(":checked"):i.val(),localStorage[r]=JSON.stringify(a))};return this.each(function(){var e=t(this);if("undefined"==typeof Storage)return void alert("local storage is not available");var o=e.attr("name");e.find("input, select").change(i);var r=!1;return n()?(localStorage[o]&&(r=JSON.parse(localStorage[o])),void(r&&e.find("input, select").each(function(){if("submit"!=t(this).attr("type")){var e=t(this),n=r[e.attr("name")];"undefined"!=typeof n&&("radio"==e.attr("type")?t("input[name="+e.attr("name")+"][value="+n+"]").attr("checked","checked"):"checkbox"==e.attr("type")?n?e.attr("checked","checked"):e.removeAttr("checked"):e.val(n))}}))):void alert("localStorage is not supported on this Browser. Your Settings will not be saved.")})}}(jQuery);var SettingsController=function(){var t=[{width:"800",height:"600"},{width:"1024",height:"600"},{width:"1024",height:"768"},{width:"1152",height:"864"},{width:"1280",height:"720"},{width:"1280",height:"768"},{width:"1280",height:"800"},{width:"1280",height:"960"},{width:"1280",height:"1024"},{width:"1360",height:"768"},{width:"1366",height:"768"},{width:"1400",height:"1050"},{width:"1440",height:"900"},{width:"1600",height:"900"},{width:"1600",height:"1200"},{width:"1680",height:"1050"},{width:"1920",height:"1080"}];SettingsController.prototype.IsGoFullScreenChecked=function(){return $("#checkboxFullscreen").is(":checked")},SettingsController.prototype.StretchScreen=function(){return $("#checkboxStretchScreen").is(":checked")},SettingsController.prototype.UseStack=function(){return!1},SettingsController.prototype.UseCustomScreenResolution=function(){return $("#useCustomResolution").is(":checked")},SettingsController.prototype.ScreenResolutions=function(){return t},SettingsController.prototype.CustomScreenResolution=function(){var e=$("#customResolution").val();return e>=0?t[e]:t[0]};var e=function(){$.each(t,function(t,e){$("#customResolution").append($("<option/>",{value:t,text:e.width+"x"+e.height}))}),$("#customResolution option[value='2']").attr("selected",!0),$("form").FormCache()};e()},CanvasController=function(){var t,e,n,o,i=Modernizr.canvas,r=(Modernizr.webgl,document.getElementById("test-target")),a=function(){return e},s=function(){return n!==o},l=function(){return e>1},c=function(){var t=document.documentElement.clientWidth,e=document.documentElement.clientHeight;Modernizr.cssvwunit||(r.style.width=t+"px",r.style.height=e+"px"),d(),renderEngine.resize(t,e)},d=function(){iOSDevice?$(r).is(".upscaleY, .upscaleX")||$(r).addClass("upscaleX").addClass("upscaleY"):($("#screen").removeClass("animate"),$("#canvasWrapper").removeClass("transition"),clearTimeout(t),settings.StretchScreen()?$(r).is(".upscaleY, .upscaleX")||$(r).addClass("upscaleX").addClass("upscaleY"):($(r).toggleClass("upscaleX",window.innerWidth<=spaceController.ScreenResolutionWidth()),$(r).toggleClass("upscaleY",window.innerHeight<=spaceController.ScreenResolutionHeight())),t=setTimeout(function(){$("#screen").addClass("animate"),$("#canvasWrapper").addClass("transition")},500))},u=function(t,e){r.width=t,r.height=e,d(),renderEngine.resize(t,e)},h=function(){if(!i)return console.error("Browser doesn't support Canvas Objects."),void showFatalError();var t=document.createElement("canvas"),r=t.getContext("2d");n=window.devicePixelRatio||1,o=r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1,e=n/o},p=function(){var t=document.documentElement.clientWidth,n=document.documentElement.clientHeight,o=this.DesktopHeight(),i=this.DesktopWidth();o*=e,i*=e,u(i,o),Modernizr.cssvwunit||(r.style.width=t+"px",r.style.height=n+"px"),renderEngine.resize(i,o)},f=function(t){console.info("Visibility changed to: "+t),$(r).toggle(1==t),$(r).toggleClass("on",1==t),$(r).toggleClass("off",0==t)};CanvasController.prototype.TargetCanvas=r,CanvasController.prototype.HideCursor=function(){$(r).addClass("noCursor")},CanvasController.prototype.Resize=c,CanvasController.prototype.SetSize=u,CanvasController.prototype.SetVisibility=f,CanvasController.prototype.SetupStage=p,CanvasController.prototype.CheckForScaling=d,CanvasController.prototype.GetDeviceRatio=a,CanvasController.prototype.ShouldScaleHDPICanvas=s,CanvasController.prototype.IsHDPICanvas=l,CanvasController.prototype.DesktopHeight=function(){return desktopDevice?screen.height:window.innerHeight},CanvasController.prototype.DesktopWidth=function(){return desktopDevice?screen.width:window.innerWidth},h()},canvasController=new CanvasController,MAX_CACHE_IMAGES=16,imageCache=new Array(MAX_CACHE_IMAGES),cacheTop=0,remainingCacheImages=MAX_CACHE_IMAGES,pendingRequestStack=[],RequestModel=function(t,e,n,o,i,r,a){this.src=t,this.posX=e,this.posY=n,this.posX2=o,this.posY2=i,this.callback=a,this.start=new Date,this.image=r},loadImage=function(){var t=function(t){var e=this;this.src=null,this.posX=null,this.posY=null,this.posX2=null,this.posY2=null,this.callback=null,this.start=new Date,this.image=new Image,this.image.addEventListener("load",function(){var n=new RequestModel(e.src,e.posX,e.posY,e.posX2,e.posY2,this,e.callback);settings.UseStack()?requestStack.push(n):renderEngine.draw(n),t&&t(e)},!1),this.image.addEventListener("error",function(){console.error("Image could not be loaded"),e.callback&&e.callback(e.src),t&&t(e),console.timeEnd("CanvasDrawing"),this.image=null},!1)};return t.prototype.loadImage=function(t,e,n,o,i,r){this.posX=e,this.posY=n,this.posX2=o,this.posY2=i,this.callback=r,this.src=t,this.start=new Date;try{void 0!=t&&null!=t&&t.length>0&&(this.image.src=t)}catch(a){console.error(a),loadedCallback(this),r&&r(t)}},function(e,n,o,i,r,a){var s=new t;return s.loadImage(e,n,o,i,r,a),e}}(),requestStack=[];window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();var checkForNewImages=function(){for(;requestStack.length;)req=requestStack.shift(),renderEngine.draw(req)},_startScreenWidth=window.innerWidth,_startScreenHeight=window.innerHeight,SpaceController=function(t){"use strict";var e,n,o=null,i=window.URL||window.webkitURL,r=!0,a=!0,s=0,l=0,c=0,d=0,u=!1,h=!1,p=!0,f=!1,g={Server:"",Port:28252,ResolutionMaxWidth:2560,ResolutionMaxHeight:1600,ConnectionTimeout:2e4,Reconnections:5,ReconnectionTimeout:6e4,Subsampling:2,Quality:70,Compression:3,OnConnected:function(){},OnDisconnected:function(){},OnConnectionTimout:function(){},OnReconnectionTimeOut:function(){}},m=$.extend({},g,t),v=function(t){m.Server=t,b();try{o=new WebSocket("ws://"+t+":"+m.Port),o.binaryType="arraybuffer",o.onopen=w,o.onerror=S,o.onclose=C,o.onmessage=T;var i=u?m.ReconnectionTimeout:m.ConnectionTimeout;e=setTimeout(function(){n=!0,o.close(),n=!1,m.OnConnectionTimout()},i)}catch(r){alert(r),console.log(r)}},b=function(){r=!0,s=0,l=0,c=0,o=null,window.onbeforeunload=function(){y()}},y=function(){if(m.OnDisconnected(),f=!0,o)if(1==o.readyState){var t=new Uint8Array(2);t[0]=255,t[1]=0,o.send(t),o.close(1e3)}else clearTimeout(e),p=!1},w=function(){clearTimeout(e),u&&(canvasController.SetVisibility(1),$(".reconnecting").hide()),u=!1,d=0,p=!0,h=!0,canvasController.SetupStage(),settings.UseStack&&startStackControl(),E()},C=function(t){var n=!1;if(1e3!=t.code){var i;1001==t.code?i=t.code+': An endpoint is "going away", such as a server going down or a browser having navigated away from a page.':1002==t.code?i=t.code+": An endpoint is terminating the connection due to a protocol error":1003==t.code?i=t.code+": An endpoint is terminating the connection because it has received a type of data it cannot accept (e.g., an endpoint that understands only text data MAY send this if it receives a binary message).":1004==t.code?i=t.code+": Reserved. The specific meaning might be defined in the future.":1005==t.code?i=t.code+": No status code was actually present.":1006==t.code?(n=!0,i=t.code+": The connection was closed abnormally, e.g., without sending or receiving a Close control frame"):i=1007==t.code?t.code+": An endpoint is terminating the connection because it has received data within a message that was not consistent with the type of the message (e.g., non-UTF-8 [http://tools.ietf.org/html/rfc3629] data within a text message).":1008==t.code?t.code+': An endpoint is terminating the connection because it has received a message that "violates its policy". This reason is given either if there is no other sutible reason, or if there is a need to hide specific details about the policy.':1009==t.code?t.code+": An endpoint is terminating the connection because it has received a message that is too big for it to process.":1010==t.code?t.code+": An endpoint (client) is terminating the connection because it has expected the server to negotiate one or more extension, but the server didn't return them in the response message of the WebSocket handshake. <br /> Specifically, the extensions that are needed are: "+t.reason:1011==t.code?t.code+": A server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request.":1015==t.code?t.code+": The connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified).":t.code+": Unknown reason",console.warn(i)}clearTimeout(e),o=null,self.readyState=WebSocket.CLOSED,h&&p&&n&&$(canvasController.TargetCanvas).hasClass("off")&&(console.info("Reconnect: Server closed the session due a Power State Event."),f=!1),h=!1,f?f=!1:(u=!0,d<=m.Reconnections?(d++,$(".reconnecting").show(),$("#reconnectCount").text(d),$("#reconnectionTotal").text(m.Reconnections),console.info("Reconnecting to server "+d+" of "+m.Reconnections),v(m.Server),m.OnReconnectionTimeOut()):(console.warn("Could not reconnect to server. Max. Reconnections ("+m.Reconnections+") reached. Show Error."),$("#errorMessage").html("Error while reconnecting."),$("#errorMessage").show(),m.OnDisconnected()))},T=function(t){if(t.data.length<128)return void console.error("Received Packet is to small.");if(a){var e=new Uint8Array(t.data,0,128),n=k(e,0);switch(n){case 2:R(e,t.data);break;case 3:var o=k(e,8);canvasController.SetVisibility(o),canvasController.SetSize(s,l)}}},S=function(t){1006!=t.code&&$(canvasController.TargetCanvas).is(":visible")&&($("#errorMessage").html("Error while connecting."),$("#errorMessage").show(),m.OnDisconnected())},E=function(){m.Quality<=0&&(m.Quality=1);var t=new Uint8Array(128),e=new Uint8Array(334);x(t,0,0),x(t,4,334),x(t,8,4),x(t,12,2),x(t,16,1),x(t,20,4),x(t,24,m.Compression),x(t,28,m.Subsampling),x(t,32,m.Quality);var n=canvasController.DesktopHeight(),i=canvasController.DesktopWidth();if(n*=canvasController.GetDeviceRatio(),i*=canvasController.GetDeviceRatio(),i>m.ResolutionMaxWidth&&(i=m.ResolutionMaxWidth),n>m.ResolutionMaxHeight&&(n=m.ResolutionMaxHeight),settings.UseCustomScreenResolution()){var r=settings.CustomScreenResolution();x(t,48,2),x(t,52,i),x(t,56,r.width),x(t,88,n),x(t,92,r.height)}else x(t,48,1),x(t,52,i),x(t,88,n);x(t,60,2),x(t,64,2),x(t,68,2),x(t,72,2),x(t,76,2),x(t,80,2),x(t,84,2),x(t,96,2),x(t,100,2),x(t,104,2),x(t,108,2),x(t,112,2),x(t,116,2),x(t,120,2),x(t,124,0),e[0]=49,e[1]=0,e[2]=49,e[3]=0,e[4]=49,e[5]=0,e[6]=49,e[7]=0,e[8]=49,e[9]=0,e[10]=50,e[11]=0,e[12]=50,e[13]=0,e[14]=50,e[15]=0,e[16]=50,e[17]=0,e[18]=50,e[19]=0;for(var a="Basic View ("+getBrowserName()+")",s=78,l=0;l<a.length;l++)e[s]=a.charCodeAt(l),s+=2;var c=new Uint8Array(462);c.set(t),c.set(e,128),o.send(c)},x=function(t,e,n){t[e]=255&n,t[e+1]=(65280&n)>>8,t[e+2]=(16711680&n)>>16,t[e+3]=(4278190080&n)>>24},k=function(t,e){return t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24},R=function(t,e){var n=k(t,8),o=k(t,12);(n!=s||o!=l)&&(s=n,l=o,canvasController.SetSize(s,l));var r,a=t[24]|t[25]<<8|t[26]<<16|t[27]<<24,c=t[28]|t[29]<<8|t[30]<<16|t[31]<<24,d=t[32]|t[33]<<8|t[34]<<16|t[35]<<24,u=t[36]|t[37]<<8|t[38]<<16|t[39]<<24,h=t[40],p=new Uint8Array(e,128);if(3==h){if(255!=p[0])return void console.error("not valid JPG-Array");var f=new Blob([p],{type:"image/jpg"}),r=i.createObjectURL(f);console.time("loadImage"),r.length>0&&loadImage(r,a,c,d,u,function(e){console.timeEnd("loadImage"),i.revokeObjectURL(e),r=null,f=null,p=null,t=null})}else if(0==h){var g=document.createElement("canvas");g.width=d-a,g.height=u-c;for(var m=g.getContext("2d"),v=m.getImageData(0,0,g.width,g.height),e=v.data,b=0;b<e.length;b+=4)e[b]=p[b+2],e[b+1]=p[b+1],e[b+2]=p[b],e[b+3]=255;m.putImageData(v,0,0),r=g.toDataURL(),r.length>0&&loadImage(r,a,c,d,u,function(){console.timeEnd("loadImage"),i.revokeObjectURL(this.src),m.clearRect(0,0,g.width,g.height),g=null,this.image=null,r=null,f=null,p=null,t=null})}A()},A=function(){r&&(m.OnConnected(),canvasController.SetSize(s,l),r=!1)};SpaceController.prototype.ConnectToServer=v,SpaceController.prototype.DrawScreen=a,SpaceController.prototype.SetDrawScreen=function(t){console.log("Window is now "+(t?"visible. ":"not visible. Drawing is disabled.")),a=t},SpaceController.prototype.Options=m,SpaceController.prototype.Disconnect=function(){canvasController.SetVisibility(1),y()},SpaceController.prototype.ScreenResolutionHeight=function(){return l},SpaceController.prototype.IsReconnecting=function(){return u},SpaceController.prototype.IsConnected=function(){return h},SpaceController.prototype.ScreenResolutionWidth=function(){return s},SpaceController.prototype.DesktopHeight=function(){return desktopDevice?screen.height:window.innerHeight},SpaceController.prototype.DesktopWidth=function(){return desktopDevice?screen.width:window.innerWidth}},spaceController,settings=new SettingsController,reconnect=!1,getBrowserName=function(){var t,e=navigator.appName,n=navigator.userAgent,o=n.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);return o&&null!=(t=n.match(/version\/([\.\d]+)/i))&&(o[2]=t[1]),o=o?o[1]:e},error=function(t){window.console&&(window.console.error?window.console.error(t):window.console.log&&window.console.log(t))},checkForWebGL=function(){for(var t=document.createElement("canvas"),e=["webgl","experimental-webgl"],n=null,o=0;o<e.length;++o){try{n=t.getContext(e[o],{preserveDrawingBuffer:!0,alpha:!1,premultipliedAlpha:!1,antialias:!1})}catch(i){}if(n)return!0}return!1},debouncer=function(t,e){var n,e=e||200;return function(){var o=this,i=arguments;clearTimeout(n),n=setTimeout(function(){t.apply(o,Array.prototype.slice.call(i))},e)}},connectToServer=function(){settings.IsGoFullScreenChecked()&&requestFullscreen(),$("#errorMessage").hide(),server=$("#server").val(),$("#server").css("opacity","0"),$("#buttonLogin").addClass("disabled"),$("#loader").addClass("start"),$(".loadingImage").addClass("start"),setTimeout(function(){$("#login").hide(),window.scrollTo(0,0);var t=new Image;t.addEventListener("load",function(){$("#spinner").attr("src",this.src)},!1),t.src="../page_assets/animation"+(canvasController.IsHDPICanvas()?"@2x":"")+".gif",$("#loader .loadingText").html("Connecting to "+server+"...").addClass("show"),$(".loadingImage").removeClass("start").addClass("animate");var e=$("#rangeQuality").val();0>=e&&(e=1);var n=$("input:radio:checked[name='compression']").val(),o=$("input:radio:checked[name='subsampling']").val(),i={OnConnected:onConnected,OnDisconnected:onDisconnected,Quality:e,Compression:n,Subsampling:o};spaceController=new SpaceController(i),spaceController.ConnectToServer(server),window.addEventListener("orientationchange",canvasController.Resize),iOSDevice||$(window).resize(function(){canvasController.Resize(),updateScreenResolutionInfo()})},2e3)},reconnectToServer=function(){spaceController.IsReconnecting()||(reconnect=!0,resetLoadingAnimation(),$("#loader").addClass("start"),$(".loadingImage").addClass("start"),canvasController.SetVisibility(1),setTimeout(function(){spaceController.Disconnect()},1e3))},onConnected=function(){$("#connectionStatus").html("Connected to "+spaceController.Options.Server),document.title="spacedesk (Connected to "+spaceController.Options.Server+")",$("#errorMessage").hide(),$("#login").hide(),$("#screen").show(),$("#missionControl").addClass("show"),$("#loader").addClass("fadeOut"),$("#showMenu").focus(),canvasController.HideCursor(),setTimeout(function(){$("#loader").hide()},1e3)},onDisconnected=function(){document.title="spacedesk Basic View",hideMenu(),$("#server").css("opacity","1"),$("#buttonLogin").removeClass("disabled"),$("#header").html("<b>Basic View</b>"),$("#login").show(),$("#screen").hide(),reconnect?(connectToServer(),reconnect=!1):resetLoadingAnimation()},resetLoadingAnimation=function(){$("#spinner").attr("src","../page_assets/Logo"+(canvasController.IsHDPICanvas()?"@2x":"")+".png"),$(".loadingImage").removeClass("animate"),$("#loader").removeClass("fadeOut"),$(".start").removeClass("start"),$(".show").removeClass("show"),$("#loader").show(),$(".reconnecting").hide()},requestFullscreen=function(){var t=document.getElementById("screen");t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()},cancelFullScreen=function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},onFullScreenStateChanged=function(){var t='<i class="fa fa-compress fa-space"></i>Leave Fullscreen',e='<i class="fa fa-arrows-alt fa-space"></i>Go Fullscreen';$target=$(".toggleFullscreen"),$target.html(isFullscreen()?t:e)};$(document).on("webkitfullscreenchange mozfullscreenchange fullscreenchange msfullscreenchange",onFullScreenStateChanged);
var isFullscreen=function(){return document.fullScreen?document.fullScreen:document.mozFullScreen?document.mozFullScreen:document.webkitIsFullScreen?document.webkitIsFullScreen:document.msFullscreenElement?document.msFullscreenElement:!1},toggleFullscreen=function(){$("#canvasWrapper").removeClass("transition"),isFullscreen()?cancelFullScreen():requestFullscreen(),setTimeout(function(){$("#canvasWrapper").addClass("transition")},500),$("#checkboxFullscreen").click(),hideMenu()},toggleStretchMode=function(){$("#checkboxStretchScreen").click(),$(".stretchToggle").html(settings.StretchScreen()?'<i class="fa fa-crop fa-space"></i>Stretched':'<i class="fa fa-crop fa-space"></i>Original'),canvasController.CheckForScaling()},toggleMenu=function(){updateScreenResolutionInfo(),$("#screen").toggleClass("showMenu"),$("#showMenu").toggleClass("showMenu");var t=$("#screen").hasClass("showMenu");$(".menu-helper").html(t?"Hide Menu":"Show Menu"),iOSDevice&&(t?($("#canvasWrapper").css("top",$("#menuBarWrapper").outerHeight()+$("#screenResolutionWrapper").outerHeight()),$("#screenResolutionWrapper").css("top",$("#menuBarWrapper").outerHeight())):$("#canvasWrapper").css("top","0px"))},updateScreenResolutionInfo=function(){var t='<i class="fa fa-crosshairs fa-space"></i> Resolution: '+spaceController.ScreenResolutionWidth()+"px &#215; "+spaceController.ScreenResolutionHeight()+"px";$(canvasController.TargetCanvas).is(".upscaleY, .upscaleX")&&(t+=" (scaled "+$(canvasController.TargetCanvas).width()+"px &#215; "+$(canvasController.TargetCanvas).height()+"px)"),$("#screenResolution").html(t)},hideMenu=function(){$(".showMenu").removeClass("showMenu"),$(".menu-helper").html("Show Menu"),$("#canvasWrapper").css("top","0px")},isPortrait=function(){return window.innerHeight>window.innerWidth},checkMobileState=function(){var t=isPortrait();$("#rotationInfo").toggle(t)},documentHiddenAttributeName,registerVisibility=function(){var t;"undefined"!=typeof document.hidden?(documentHiddenAttributeName="hidden",t="visibilitychange"):"undefined"!=typeof document.mozHidden?(documentHiddenAttributeName="mozHidden",t="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(documentHiddenAttributeName="msHidden",t="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(documentHiddenAttributeName="webkitHidden",t="webkitvisibilitychange"),document.addEventListener(t,windowVisibilityChange,!1)},init=function(){window.onbeforeunload=function(){document.title="spacedesk Basic View"},registerVisibility(),desktopDevice||($(window).on("orientationchange",function(){checkMobileState()}),checkMobileState()),$("#settingsModal").on("hidden.bs.modal",function(){spaceController&&spaceController.IsConnected()&&$("#settingsChangedModal").modal()}),$("#server").keypress(function(t){return 13==t.which?(t.preventDefault(),connectToServer(),!1):void 0}),$("#buttonLogin").on("click",function(t){t.preventDefault(),connectToServer()}),$(".reconnect").on("click",function(t){t.preventDefault(),cancelFullScreen(),reconnectToServer()}),$(".showSettings").on("click",function(t){return t.preventDefault(),$("#settingsModal").modal(),!1}),$("#instructionButton").on("click",function(t){return t.preventDefault(),$("#instructionSteps a:first").tab("show"),$("#instructionModal").modal(),!1}),$(".tabnavbutton").on("click",function(t){return t.preventDefault(),$('#instructionSteps a[href="'+$(this).attr("href")+'"]').tab("show"),!1}),$(document).on("click",".toggleFullscreen",function(t){t.preventDefault(),toggleFullscreen()}),$(canvasController.TargetCanvas).on("dblclick",function(t){t.preventDefault(),toggleFullscreen()}),$(document).on("click","#showMenu, .toggleMenu",function(t){t.preventDefault(),toggleMenu()}),$(document).on("click",".stretchToggle",function(t){t.preventDefault(),toggleStretchMode()}),settings.StretchScreen()&&$(canvasController.TargetCanvas).addClass("upscaleX").addClass("upscaleY"),desktopDevice||$(".stretchToggle, .toggleFullscreen").hide(),canvasController.TargetCanvas.addEventListener("touchstart",hideMenu,!1),$(canvasController.TargetCanvas).on("click",hideMenu),$(".closeConnection").on("click",function(){cancelFullScreen(),spaceController.Disconnect()}),canvasController.IsHDPICanvas()&&$(".retina").each(function(){var t=$(this).attr("src"),e="."+t.substr((Math.max(0,t.lastIndexOf("."))||1/0)+1),n=t.split(e)[0],o=n+"@2x"+e,i=$(this);$.ajax({url:o,error:function(){},success:function(){i.hasClass("nowidth")||i.css("width",i[0].width),i.attr("src",o)}})}),Modernizr.websockets||(console.error("Browser doesn't support websockets."),showFatalError())};init();var loadTexture=function(){function t(t){var e;r.length?(e=r.shift(),t.loadTexture(e.gl,e.src,e.texture,e.callback)):n[o++]=t}var e=16,n=new Array(e),o=0,i=e,r=[],a=function(t){var e=this;this.gl=null,this.texture=null,this.callback=null,this.image=new Image,this.image.addEventListener("load",function(){var n=e.gl;n.bindTexture(n.TEXTURE_2D,e.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGB,n.RGB,n.UNSIGNED_BYTE,e.image),n.pixelStorei(n.UNPACK_ALIGNMENT,1),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),t(e),e.callback&&e.callback(e.texture,e.image.src)})};a.prototype.loadTexture=function(t,e,n,o){this.gl=t,this.texture=n,this.callback=o,this.image.src=e};var s=function(t,e,n,o){this.gl=t,this.src=e,this.texture=n,this.callback=o};return function(e,l,c){var d,u=e.createTexture();return o?(d=n[--o],d.loadTexture(e,l,u,c)):i?(d=new a(t),d.loadTexture(e,l,u,c),--i):r.push(new s(e,l,u,c)),u}}(),CanvasImageRender=function(){var t=canvasController.TargetCanvas.getContext("2d"),e=function(){};CanvasImageRender.prototype.Context=t,CanvasImageRender.prototype.init=function(){return t.globalCompositeOperation="destination-over",e(),!0},CanvasImageRender.prototype.resize=function(){e()},CanvasImageRender.prototype.draw=function(e){console.time("CanvasDrawing"),width=e.posX2-e.posX,height=e.posY2-e.posY,t.drawImage(e.image,0,0,width,height,e.posX,e.posY,width,height),e.callback&&e.callback(e.src),e.image=null,console.timeEnd("CanvasDrawing")}},WebGLImageRender=function(){var t,e,n="attribute vec2 a_position;\nattribute vec2 a_texCoord;\nuniform vec2 u_resolution;\nvarying vec2 v_texCoord;\nvoid main() {\n	// convert the rectangle from pixels to 0.0 to 1.0\n	vec2 zeroToOne = a_position / u_resolution;\n	// convert from 0->1 to 0->2\n	vec2 zeroToTwo = zeroToOne * 2.0;\n	// convert from 0->2 to -1->+1 (clipspace)\n	vec2 clipSpace = zeroToTwo - 1.0;\n	gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n	// pass the texCoord to the fragment shader\n	// The GPU will interpolate this value between points.\n	v_texCoord = a_texCoord;\n}",o="precision mediump float; \n// our texture \nuniform sampler2D u_image; \n// the texCoords passed in from the vertex shader. \nvarying vec2 v_texCoord; \nvoid main() { \n	gl_FragColor = texture2D(u_image, v_texCoord); \n}",i=function(t,e){for(var n=["webgl","experimental-webgl"],o=null,i=0;i<n.length;++i){try{o=t.getContext(n[i],e)}catch(r){}if(o)break}return o},r=function(t,e,n,o){for(var i=t.createProgram(),r=0;r<e.length;++r)t.attachShader(i,e[r]);if(n)for(var r=0;r<n.length;++r)t.bindAttribLocation(i,o?o[r]:r,n[r]);t.linkProgram(i);var a=t.getProgramParameter(i,t.LINK_STATUS);return a?i:(lastError=t.getProgramInfoLog(i),c("Error in program linking:"+lastError),t.deleteProgram(i),null)},a=function(t,e,n,o){var i=o||c,r=t.createShader(n);t.shaderSource(r,e),t.compileShader(r);var a=t.getShaderParameter(r,t.COMPILE_STATUS);return a?r:(lastError=t.getShaderInfoLog(r),i("*** Error compiling shader '"+r+"':"+lastError),t.deleteShader(r),null)},s=i(canvasController.TargetCanvas,{preserveDrawingBuffer:!0,alpha:!1,premultipliedAlpha:!1,antialias:!1}),l=function(t){console.time("CanvasDrawing"),width=t.posX2-t.posX,height=t.posY2-t.posY;var e=s.createTexture();s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,e),s.pixelStorei(s.UNPACK_ALIGNMENT,1),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.NEAREST),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.NEAREST),s.texImage2D(s.TEXTURE_2D,0,s.RGB,s.RGB,s.UNSIGNED_BYTE,t.image);var n=s.getUniformLocation(program,"u_resolution");s.uniform2f(n,canvasController.TargetCanvas.width,canvasController.TargetCanvas.height);var o=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,o),s.enableVertexAttribArray(canvasController.PositionLocation),s.vertexAttribPointer(canvasController.PositionLocation,2,s.FLOAT,!1,0,0);var i=t.posX,r=t.posX2,a=t.posY,l=t.posY2;s.bufferData(s.ARRAY_BUFFER,new Float32Array([i,a,r,a,i,l,i,l,r,a,r,l]),s.STATIC_DRAW),s.drawArrays(s.TRIANGLE_STRIP,0,6),t.callback&&t.callback(t.src),s.deleteBuffer(o),s.deleteTexture(e),t.image=null,console.timeEnd("CanvasDrawing")};WebGLImageRender.prototype.Context=s,WebGLImageRender.prototype.init=function(){try{vertexShader=a(s,n,s.VERTEX_SHADER),fragmentShader=a(s,o,s.FRAGMENT_SHADER),program=r(s,[vertexShader,fragmentShader]),s.linkProgram(program),s.getProgramParameter(program,s.LINK_STATUS)||alert("Unable to initialize the shader program."),s.useProgram(program)}catch(i){return c(i),!1}s.clearColor(0,0,0,1),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT|s.STENCIL_BUFFER_BIT),s.disable(s.CULL_FACE),s.colorMask(1,1,1,0),s.enable(s.BLEND),s.blendFunc(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA),t=s.getAttribLocation(program,"a_position"),e=s.getAttribLocation(program,"a_texCoord");var l=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,l),s.bufferData(s.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),s.STATIC_DRAW),s.enableVertexAttribArray(e),s.vertexAttribPointer(e,2,s.FLOAT,!1,0,0);var d=canvasController.DesktopHeight(),u=canvasController.DesktopWidth();return s.viewport(0,0,u,d),!0},WebGLImageRender.prototype.resize=function(){var t=spaceController.ScreenResolutionHeight(),e=spaceController.ScreenResolutionWidth();s.viewport(0,0,e,t)},WebGLImageRender.prototype.draw=function(t){l(t)};var c=function(t){window.console&&(window.console.error?window.console.error(t):window.console.log&&window.console.log(t))}};if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}t.fn.emulateTransitionEnd=function(e){var n=!1,o=this;t(this).one("bsTransitionEnd",function(){n=!0});var i=function(){n||t(o).trigger(t.support.transition.end)};return setTimeout(i,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),i=n.data("bs.alert");i||n.data("bs.alert",i=new o(this)),"string"==typeof e&&i[e].call(n)})}var n='[data-dismiss="alert"]',o=function(e){t(e).on("click",n,this.close)};o.VERSION="3.3.1",o.TRANSITION_DURATION=150,o.prototype.close=function(e){function n(){a.detach().trigger("closed.bs.alert").remove()}var i=t(this),r=i.attr("data-target");r||(r=i.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var a=t(r);e&&e.preventDefault(),a.length||(a=i.closest(".alert")),a.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(a.removeClass("in"),t.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",n).emulateTransitionEnd(o.TRANSITION_DURATION):n())};var i=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=o,t.fn.alert.noConflict=function(){return t.fn.alert=i,this},t(document).on("click.bs.alert.data-api",n,o.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),i=o.data("bs.button"),r="object"==typeof e&&e;i||o.data("bs.button",i=new n(this,r)),"toggle"==e?i.toggle():e&&i.setState(e)})}var n=function(e,o){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,o),this.isLoading=!1};n.VERSION="3.3.1",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(e){var n="disabled",o=this.$element,i=o.is("input")?"val":"html",r=o.data();e+="Text",null==r.resetText&&o.data("resetText",o[i]()),setTimeout(t.proxy(function(){o[i](null==r[e]?this.options[e]:r[e]),"loadingText"==e?(this.isLoading=!0,o.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,o.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));t&&this.$element.toggleClass("active")};var o=t.fn.button;t.fn.button=e,t.fn.button.Constructor=n,t.fn.button.noConflict=function(){return t.fn.button=o,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var o=t(n.target);o.hasClass("btn")||(o=o.closest(".btn")),e.call(o,"toggle"),n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),i=o.data("bs.carousel"),r=t.extend({},n.DEFAULTS,o.data(),"object"==typeof e&&e),a="string"==typeof e?e:r.slide;i||o.data("bs.carousel",i=new n(this,r)),"number"==typeof e?i.to(e):a?i[a]():r.interval&&i.pause().cycle()})}var n=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};n.VERSION="3.3.1",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},n.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},n.prototype.getItemForDirection=function(t,e){var n="prev"==t?-1:1,o=this.getItemIndex(e),i=(o+n)%this.$items.length;return this.$items.eq(i)},n.prototype.to=function(t){var e=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",this.$items.eq(t))},n.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(e,o){var i=this.$element.find(".item.active"),r=o||this.getItemForDirection(e,i),a=this.interval,s="next"==e?"left":"right",l="next"==e?"first":"last",c=this;if(!r.length){if(!this.options.wrap)return;r=this.$element.find(".item")[l]()}if(r.hasClass("active"))return this.sliding=!1;var d=r[0],u=t.Event("slide.bs.carousel",{relatedTarget:d,direction:s});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=t(this.$indicators.children()[this.getItemIndex(r)]);h&&h.addClass("active")}var p=t.Event("slid.bs.carousel",{relatedTarget:d,direction:s});return t.support.transition&&this.$element.hasClass("slide")?(r.addClass(e),r[0].offsetWidth,i.addClass(s),r.addClass(s),i.one("bsTransitionEnd",function(){r.removeClass([e,s].join(" ")).addClass("active"),i.removeClass(["active",s].join(" ")),c.sliding=!1,setTimeout(function(){c.$element.trigger(p)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(i.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger(p)),a&&this.cycle(),this}};var o=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=n,t.fn.carousel.noConflict=function(){return t.fn.carousel=o,this};var i=function(n){var o,i=t(this),r=t(i.attr("data-target")||(o=i.attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,""));if(r.hasClass("carousel")){var a=t.extend({},r.data(),i.data()),s=i.attr("data-slide-to");s&&(a.interval=!1),e.call(r,a),s&&r.data("bs.carousel").to(s),n.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",i).on("click.bs.carousel.data-api","[data-slide-to]",i),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var n=t(this);e.call(n,n.data())})})}(jQuery),+function(t){"use strict";function e(e){var n,o=e.attr("data-target")||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return t(o)}function n(e){return this.each(function(){var n=t(this),i=n.data("bs.collapse"),r=t.extend({},o.DEFAULTS,n.data(),"object"==typeof e&&e);!i&&r.toggle&&"show"==e&&(r.toggle=!1),i||n.data("bs.collapse",i=new o(this,r)),"string"==typeof e&&i[e]()})}var o=function(e,n){this.$element=t(e),this.options=t.extend({},o.DEFAULTS,n),this.$trigger=t(this.options.trigger).filter('[href="#'+e.id+'"], [data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};o.VERSION="3.3.1",o.TRANSITION_DURATION=350,o.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'},o.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},o.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,i=this.$parent&&this.$parent.find("> .panel").children(".in, .collapsing");if(!(i&&i.length&&(e=i.data("bs.collapse"),e&&e.transitioning))){var r=t.Event("show.bs.collapse");if(this.$element.trigger(r),!r.isDefaultPrevented()){i&&i.length&&(n.call(i,"hide"),e||i.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return s.call(this);var l=t.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",t.proxy(s,this)).emulateTransitionEnd(o.TRANSITION_DURATION)[a](this.$element[0][l])}}}},o.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[n](0).one("bsTransitionEnd",t.proxy(i,this)).emulateTransitionEnd(o.TRANSITION_DURATION):i.call(this)}}},o.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},o.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(n,o){var i=t(o);this.addAriaAndCollapsedClass(e(i),i)},this)).end()},o.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var i=t.fn.collapse;t.fn.collapse=n,t.fn.collapse.Constructor=o,t.fn.collapse.noConflict=function(){return t.fn.collapse=i,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(o){var i=t(this);i.attr("data-target")||o.preventDefault();var r=e(i),a=r.data("bs.collapse"),s=a?"toggle":t.extend({},i.data(),{trigger:this});n.call(r,s)})}(jQuery),+function(t){"use strict";function e(e){e&&3===e.which||(t(i).remove(),t(r).each(function(){var o=t(this),i=n(o),r={relatedTarget:this};i.hasClass("open")&&(i.trigger(e=t.Event("hide.bs.dropdown",r)),e.isDefaultPrevented()||(o.attr("aria-expanded","false"),i.removeClass("open").trigger("hidden.bs.dropdown",r)))}))}function n(e){var n=e.attr("data-target");n||(n=e.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var o=n&&t(n);return o&&o.length?o:e.parent()}function o(e){return this.each(function(){var n=t(this),o=n.data("bs.dropdown");o||n.data("bs.dropdown",o=new a(this)),"string"==typeof e&&o[e].call(n)})}var i=".dropdown-backdrop",r='[data-toggle="dropdown"]',a=function(e){t(e).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.1",a.prototype.toggle=function(o){var i=t(this);if(!i.is(".disabled, :disabled")){var r=n(i),a=r.hasClass("open");if(e(),!a){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var s={relatedTarget:this};if(r.trigger(o=t.Event("show.bs.dropdown",s)),o.isDefaultPrevented())return;i.trigger("focus").attr("aria-expanded","true"),r.toggleClass("open").trigger("shown.bs.dropdown",s)}return!1}},a.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var o=t(this);if(e.preventDefault(),e.stopPropagation(),!o.is(".disabled, :disabled")){var i=n(o),a=i.hasClass("open");if(!a&&27!=e.which||a&&27==e.which)return 27==e.which&&i.find(r).trigger("focus"),o.trigger("click");var s=" li:not(.divider):visible a",l=i.find('[role="menu"]'+s+', [role="listbox"]'+s);if(l.length){var c=l.index(e.target);38==e.which&&c>0&&c--,40==e.which&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var s=t.fn.dropdown;t.fn.dropdown=o,t.fn.dropdown.Constructor=a,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=s,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",r,a.prototype.toggle).on("keydown.bs.dropdown.data-api",r,a.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',a.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',a.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,o){return this.each(function(){var i=t(this),r=i.data("bs.modal"),a=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e);r||i.data("bs.modal",r=new n(this,a)),"string"==typeof e?r[e](o):a.show&&r.show(o)})}var n=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.1",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},n.prototype.show=function(e){var o=this,i=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var i=t.support.transition&&o.$element.hasClass("fade");o.$element.parent().length||o.$element.appendTo(o.$body),o.$element.show().scrollTop(0),o.options.backdrop&&o.adjustBackdrop(),o.adjustDialog(),i&&o.$element[0].offsetWidth,o.$element.addClass("in").attr("aria-hidden",!1),o.enforceFocus();var r=t.Event("shown.bs.modal",{relatedTarget:e});i?o.$element.find(".modal-dialog").one("bsTransitionEnd",function(){o.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(n.TRANSITION_DURATION):o.$element.trigger("focus").trigger(r)}))},n.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(e){var o=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=t.support.transition&&i;if(this.$backdrop=t('<div class="modal-backdrop '+i+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;r?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){o.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):a()}else e&&e()},n.prototype.handleUpdate=function(){this.options.backdrop&&this.adjustBackdrop(),this.adjustDialog()},n.prototype.adjustBackdrop=function(){this.$backdrop.css("height",0).css("height",this.$element[0].scrollHeight)},n.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},n.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var o=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=n,t.fn.modal.noConflict=function(){return t.fn.modal=o,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var o=t(this),i=o.attr("href"),r=t(o.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),a=r.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(i)&&i},r.data(),o.data());o.is("a")&&n.preventDefault(),r.one("show.bs.modal",function(t){t.isDefaultPrevented()||r.one("hidden.bs.modal",function(){o.is(":visible")&&o.trigger("focus")})}),e.call(r,a,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),i=o.data("bs.tooltip"),r="object"==typeof e&&e,a=r&&r.selector;(i||"destroy"!=e)&&(a?(i||o.data("bs.tooltip",i={}),i[a]||(i[a]=new n(this,r))):i||o.data("bs.tooltip",i=new n(this,r)),"string"==typeof e&&i[e]())})}var n=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};n.VERSION="3.3.1",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(e,n,o){this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(o),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport);for(var i=this.options.trigger.split(" "),r=i.length;r--;){var a=i[r];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},n.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,o){n[t]!=o&&(e[t]=o)}),e},n.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n&&n.$tip&&n.$tip.is(":visible")?void(n.hoverState="in"):(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()
},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var o=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!o)return;var i=this,r=this.tip(),a=this.getUID(this.type);this.setContent(),r.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&r.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(s);c&&(s=s.replace(l,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element);var d=this.getPosition(),u=r[0].offsetWidth,h=r[0].offsetHeight;if(c){var p=s,f=this.options.container?t(this.options.container):this.$element.parent(),g=this.getPosition(f);s="bottom"==s&&d.bottom+h>g.bottom?"top":"top"==s&&d.top-h<g.top?"bottom":"right"==s&&d.right+u>g.width?"left":"left"==s&&d.left-u<g.left?"right":s,r.removeClass(p).addClass(s)}var m=this.getCalculatedOffset(s,d,u,h);this.applyPlacement(m,s);var v=function(){var t=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==t&&i.leave(i)};t.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",v).emulateTransitionEnd(n.TRANSITION_DURATION):v()}},n.prototype.applyPlacement=function(e,n){var o=this.tip(),i=o[0].offsetWidth,r=o[0].offsetHeight,a=parseInt(o.css("margin-top"),10),s=parseInt(o.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),e.top=e.top+a,e.left=e.left+s,t.offset.setOffset(o[0],t.extend({using:function(t){o.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),o.addClass("in");var l=o[0].offsetWidth,c=o[0].offsetHeight;"top"==n&&c!=r&&(e.top=e.top+r-c);var d=this.getViewportAdjustedDelta(n,e,l,c);d.left?e.left+=d.left:e.top+=d.top;var u=/top|bottom/.test(n),h=u?2*d.left-i+l:2*d.top-r+c,p=u?"offsetWidth":"offsetHeight";o.offset(e),this.replaceArrow(h,o[0][p],u)},n.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},n.prototype.hide=function(e){function o(){"in"!=i.hoverState&&r.detach(),i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type),e&&e()}var i=this,r=this.tip(),a=t.Event("hide.bs."+this.type);return this.$element.trigger(a),a.isDefaultPrevented()?void 0:(r.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",o).emulateTransitionEnd(n.TRANSITION_DURATION):o(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(e){e=e||this.$element;var n=e[0],o="BODY"==n.tagName,i=n.getBoundingClientRect();null==i.width&&(i=t.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var r=o?{top:0,left:0}:e.offset(),a={scroll:o?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},s=o?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},i,a,s,r)},n.prototype.getCalculatedOffset=function(t,e,n,o){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-o,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-o/2,left:e.left-n}:{top:e.top+e.height/2-o/2,left:e.left+e.width}},n.prototype.getViewportAdjustedDelta=function(t,e,n,o){var i={top:0,left:0};if(!this.$viewport)return i;var r=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var s=e.top-r-a.scroll,l=e.top+r-a.scroll+o;s<a.top?i.top=a.top-s:l>a.top+a.height&&(i.top=a.top+a.height-l)}else{var c=e.left-r,d=e.left+r+n;c<a.left?i.left=a.left-c:d>a.width&&(i.left=a.left+a.width-d)}return i},n.prototype.getTitle=function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},n.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},n.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(e){var n=this;e&&(n=t(e.currentTarget).data("bs."+this.type),n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var o=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=n,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=o,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),i=o.data("bs.popover"),r="object"==typeof e&&e,a=r&&r.selector;(i||"destroy"!=e)&&(a?(i||o.data("bs.popover",i={}),i[a]||(i[a]=new n(this,r))):i||o.data("bs.popover",i=new n(this,r)),"string"==typeof e&&i[e]())})}var n=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.1",n.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},n.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var o=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=n,t.fn.popover.noConflict=function(){return t.fn.popover=o,this}}(jQuery),+function(t){"use strict";function e(n,o){var i=t.proxy(this.process,this);this.$body=t("body"),this.$scrollElement=t(t(n).is("body")?window:n),this.options=t.extend({},e.DEFAULTS,o),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",i),this.refresh(),this.process()}function n(n){return this.each(function(){var o=t(this),i=o.data("bs.scrollspy"),r="object"==typeof n&&n;i||o.data("bs.scrollspy",i=new e(this,r)),"string"==typeof n&&i[n]()})}e.VERSION="3.3.1",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e="offset",n=0;t.isWindow(this.$scrollElement[0])||(e="position",n=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var o=this;this.$body.find(this.selector).map(function(){var o=t(this),i=o.data("target")||o.attr("href"),r=/^#./.test(i)&&t(i);return r&&r.length&&r.is(":visible")&&[[r[e]().top+n,i]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){o.offsets.push(this[0]),o.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),o=this.options.offset+n-this.$scrollElement.height(),i=this.offsets,r=this.targets,a=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),e>=o)return a!=(t=r[r.length-1])&&this.activate(t);if(a&&e<i[0])return this.activeTarget=null,this.clear();for(t=i.length;t--;)a!=r[t]&&e>=i[t]&&(!i[t+1]||e<=i[t+1])&&this.activate(r[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',o=t(n).parents("li").addClass("active");o.parent(".dropdown-menu").length&&(o=o.closest("li.dropdown").addClass("active")),o.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var o=t.fn.scrollspy;t.fn.scrollspy=n,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=o,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);n.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),i=o.data("bs.tab");i||o.data("bs.tab",i=new n(this)),"string"==typeof e&&i[e]()})}var n=function(e){this.element=t(e)};n.VERSION="3.3.1",n.TRANSITION_DURATION=150,n.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),o=e.data("target");if(o||(o=e.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var i=n.find(".active:last a"),r=t.Event("hide.bs.tab",{relatedTarget:e[0]}),a=t.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(r),e.trigger(a),!a.isDefaultPrevented()&&!r.isDefaultPrevented()){var s=t(o);this.activate(e.closest("li"),n),this.activate(s,s.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})}}},n.prototype.activate=function(e,o,i){function r(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}var a=o.find("> .active"),s=i&&t.support.transition&&(a.length&&a.hasClass("fade")||!!o.find("> .fade").length);a.length&&s?a.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),a.removeClass("in")};var o=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=n,t.fn.tab.noConflict=function(){return t.fn.tab=o,this};var i=function(n){n.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),i=o.data("bs.affix"),r="object"==typeof e&&e;i||o.data("bs.affix",i=new n(this,r)),"string"==typeof e&&i[e]()})}var n=function(e,o){this.options=t.extend({},n.DEFAULTS,o),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.1",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(t,e,n,o){var i=this.$target.scrollTop(),r=this.$element.offset(),a=this.$target.height();if(null!=n&&"top"==this.affixed)return n>i?"top":!1;if("bottom"==this.affixed)return null!=n?i+this.unpin<=r.top?!1:"bottom":t-o>=i+a?!1:"bottom";var s=null==this.affixed,l=s?i:r.top,c=s?a:e;return null!=n&&n>=l?"top":null!=o&&l+c>=t-o?"bottom":!1},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},n.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),o=this.options.offset,i=o.top,r=o.bottom,a=t("body").height();"object"!=typeof o&&(r=i=o),"function"==typeof i&&(i=o.top(this.$element)),"function"==typeof r&&(r=o.bottom(this.$element));var s=this.getState(a,e,i,r);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var l="affix"+(s?"-"+s:""),c=t.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:a-e-r})}};var o=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=n,t.fn.affix.noConflict=function(){return t.fn.affix=o,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var n=t(this),o=n.data();o.offset=o.offset||{},null!=o.offsetBottom&&(o.offset.bottom=o.offsetBottom),null!=o.offsetTop&&(o.offset.top=o.offsetTop),e.call(n,o)})})}(jQuery),function(t,e){t.fn.contextMenu=function(n){function o(o,i,r){var a=t(e)[i](),s=t(e)[r](),l=t(n.menuSelector)[i](),c=o+s;return o+l>a&&o>l&&(c-=l),c}return this.each(function(){t(this).on("contextmenu",function(e){return e.ctrlKey?void 0:(t(n.menuSelector).data("invokedOn",t(e.target)).show().css({position:"absolute",left:o(e.clientX,"width","scrollLeft"),top:o(e.clientY,"height","scrollTop")}).off("click").on("click",function(e){t(this).hide();var o=t(this).data("invokedOn"),i=t(e.target);n.menuSelected.call(this,o,i)}),!1)}),t(document).click(function(){t(n.menuSelector).hide()})})}}(jQuery,window),$("#canvasWrapper, #login").contextMenu({menuSelector:"#contextMenu",menuSelected:function(){}});