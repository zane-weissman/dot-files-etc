(function(){
var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(c,e,a){if(a.get||a.set)throw new TypeError("ES3 does not support getters and setters.");c!=Array.prototype&&c!=Object.prototype&&(c[e]=a.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(c){var e=0;return $jscomp.iteratorPrototype(function(){return e<c.length?{done:!1,value:c[e++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.makeIterator=function(c){$jscomp.initSymbolIterator();var e=c[Symbol.iterator];return e?e.call(c):$jscomp.arrayIterator(c)};
$jscomp.polyfill=function(c,e,a,b){if(e){a=$jscomp.global;c=c.split(".");for(b=0;b<c.length-1;b++){var d=c[b];d in a||(a[d]={});a=a[d]}c=c[c.length-1];b=a[c];e=e(b);e!=b&&null!=e&&$jscomp.defineProperty(a,c,{configurable:!0,writable:!0,value:e})}};$jscomp.EXPOSE_ASYNC_EXECUTOR=!0;$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(c){function e(){this.batch_=null}if(c&&!$jscomp.FORCE_POLYFILL_PROMISE)return c;e.prototype.asyncExecute=function(b){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(b);return this};e.prototype.asyncExecuteBatch_=function(){var b=this;this.asyncExecuteFunction(function(){b.executeBatch_()})};var a=$jscomp.global.setTimeout;e.prototype.asyncExecuteFunction=function(b){a(b,0)};e.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var b=
this.batch_;this.batch_=[];for(var a=0;a<b.length;++a){var d=b[a];delete b[a];try{d()}catch(m){this.asyncThrow_(m)}}}this.batch_=null};e.prototype.asyncThrow_=function(b){this.asyncExecuteFunction(function(){throw b;})};var b=function(b){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var a=this.createResolveAndReject_();try{b(a.resolve,a.reject)}catch(n){a.reject(n)}};b.prototype.createResolveAndReject_=function(){function b(b){return function(r){d||(d=!0,b.call(a,r))}}var a=this,d=
!1;return{resolve:b(this.resolveTo_),reject:b(this.reject_)}};b.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof b)this.settleSameAsPromise_(a);else{var d;a:switch(typeof a){case "object":d=null!=a;break a;case "function":d=!0;break a;default:d=!1}d?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};b.prototype.resolveToNonPromiseObj_=function(b){var a=void 0;try{a=b.then}catch(n){this.reject_(n);return}"function"==
typeof a?this.settleSameAsThenable_(a,b):this.fulfill_(b)};b.prototype.reject_=function(b){this.settle_(2,b)};b.prototype.fulfill_=function(b){this.settle_(1,b)};b.prototype.settle_=function(b,a){if(0!=this.state_)throw Error("Cannot settle("+b+", "+a|"): Promise already settled in state"+this.state_);this.state_=b;this.result_=a;this.executeOnSettledCallbacks_()};b.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var b=this.onSettledCallbacks_,a=0;a<b.length;++a)b[a].call(),
b[a]=null;this.onSettledCallbacks_=null}};var d=new e;b.prototype.settleSameAsPromise_=function(b){var a=this.createResolveAndReject_();b.callWhenSettled_(a.resolve,a.reject)};b.prototype.settleSameAsThenable_=function(b,a){var d=this.createResolveAndReject_();try{b.call(a,d.resolve,d.reject)}catch(m){d.reject(m)}};b.prototype.then=function(a,d){function c(b,a){return"function"==typeof b?function(a){try{r(b(a))}catch(p){g(p)}}:a}var r,g,h=new b(function(b,a){r=b;g=a});this.callWhenSettled_(c(a,r),
c(d,g));return h};b.prototype["catch"]=function(b){return this.then(void 0,b)};b.prototype.callWhenSettled_=function(b,a){function c(){switch(r.state_){case 1:b(r.result_);break;case 2:a(r.result_);break;default:throw Error("Unexpected state: "+r.state_);}}var r=this;null==this.onSettledCallbacks_?d.asyncExecute(c):this.onSettledCallbacks_.push(function(){d.asyncExecute(c)})};b.resolve=function(a){return a instanceof b?a:new b(function(b,d){b(a)})};b.reject=function(a){return new b(function(b,d){d(a)})};
b.race=function(a){return new b(function(d,c){for(var r=$jscomp.makeIterator(a),g=r.next();!g.done;g=r.next())b.resolve(g.value).callWhenSettled_(d,c)})};b.all=function(a){var d=$jscomp.makeIterator(a),c=d.next();return c.done?b.resolve([]):new b(function(a,g){function h(b){return function(q){k[b]=q;f--;0==f&&a(k)}}var k=[],f=0;do k.push(void 0),f++,b.resolve(c.value).callWhenSettled_(h(k.length-1),g),c=d.next();while(!c.done)})};$jscomp.EXPOSE_ASYNC_EXECUTOR&&(b.$jscomp$new$AsyncExecutor=function(){return new e});
return b},"es6-impl","es3");$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(c,e){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var a=0,b={next:function(){if(a<c.length){var d=a++;return{value:e(d,c[d]),done:!1}}b.next=function(){return{done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};
$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6-impl","es3");$jscomp.findInternal=function(c,e,a){c instanceof String&&(c=String(c));for(var b=c.length,d=0;d<b;d++){var r=c[d];if(e.call(a,r,d,c))return{i:d,v:r}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(c,a){return $jscomp.findInternal(this,c,a).v}},"es6-impl","es3");
$jscomp.owns=function(c,e){return Object.prototype.hasOwnProperty.call(c,e)};$jscomp.polyfill("Object.assign",function(c){return c?c:function(c,a){for(var b=1;b<arguments.length;b++){var d=arguments[b];if(d)for(var r in d)$jscomp.owns(d,r)&&(c[r]=d[r])}return c}},"es6-impl","es3");
$jscomp.checkStringArgs=function(c,e,a){if(null==c)throw new TypeError("The 'this' value for String.prototype."+a+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+a+" must not be a regular expression");return c+""};$jscomp.polyfill("String.prototype.includes",function(c){return c?c:function(c,a){return-1!==$jscomp.checkStringArgs(this,c,"includes").indexOf(c,a||0)}},"es6-impl","es3");
webpackJsonp([2],[function(c,e,a){(function(b){var d=a(15),c=a(16),l=a(63);window.altirnao=window.altirnao||{};window.altirnao.context="drive";a(64)({isValidPage:function(){return 0!==b(d.mainPage).length?Promise.resolve():Promise.reject()},extensionManager:c,pageActionMessenger:l,wait:{elementSelector:d.loadingIndicator,functionName:"waitElement",functionParameter:!1}})}).call(e,a(2))},,,,,,,,,,,,,,,,function(c,e,a){(function(b){function d(a){if(!(this instanceof d))return new d(a);var c=this,n=
x.getUserData(),E=!1;this.uuid=r.getUUID();this.isDisposed=function(){return E};this.getHiddenFeatures=function(){return[]};this.reload=function(){c.uuid=r.getUUID();p.config.hideLineContainer();q.dispose();h.disposeDialogs();t.dispose();A.clear();u.loadSyncData(G)};this.onFeatureChange=function(b){l.debug("onFeatureChange()","Feature settings changed to",b);var a=Object.keys(b)[0];b=b[a];u.changeFeature(a,b);k.unpush("#"+a);C.checkViewType(!1);b&&p.config.resetDomChecks();p.isValidFeatureName(a)&&
(b=p.getAliasedFeatureNames(a),b.push(a),b.forEach(function(b){return p.initFeature(b)}));k.initSuccess()};this.dispose=function(){E||(E=!0,x.dispose(),q.dispose(),p.disposeFeatures(),h.disposeDialogs(),t.dispose(),b(".ao-hidden").removeClass("ao-hidden"),b(window).off(".awesomeDrive"),b(document).off(".awesomeDrive"),y.dispose(),w.dispose(),b(window).trigger("dispose-extension-"+chrome.runtime.id))};var G=function(){k.reset();y.init();k.initProgress("popupInitializing");x.clearCache(function(){var b;
n.isUserDefined()?b=!0:(k.initFail("popupErrNoUser"),l.error("_checkPrerequisites()","User email address is mandatory to initialize the extension"),b=!1);b&&F(c.uuid)})},F=function(b){l.info("_init()","Initializing extension for user",n.getUser());w.init();w.getOAuth2Token(function(a){if(b===c.uuid)if(a.token){a.tokenAlreadyExists||w.showNotification("oauthSuccess","oauthSuccessTitle","oauthSuccessDetail");try{g.isSupportedOs(n.getOS())||y.updateStatusPopup(),C.checkViewType(!1),t.init(),f.init(),
p.initFeatures(),q.initTooltips(),w.sendTokenToDriveUtils(),m.handleAODocsUrlParams(),k.isInitPending()&&k.initSuccess(),e.trackPageInit()}catch(J){k.initFail("popupErrUnexpected"),l.error("_triggerInit()","Unexpected error occurred during extension initialization",J)}}else k.initFail("popupErrNotAuthorize"),w.showNotification("oauthFailure","oauthFailureTitle","oauthFailureDetail"),l.warn("_onOAuth2Failed()","Extension not granted by",x.getUserData().getUser())},!0)};u.loadSyncData(G)}var r=a(4),
l=a(5)("AwesomeDrive","ExtensionManager"),e=a(17);a(8);var m=a(24),g=a(51),h=a(27),k=a(41),f=a(38),q=a(60),p=a(37),t=a(61),u=a(45),C=a(39),x=a(18),A=a(23),w=a(22),y=a(63);c.exports=d}).call(e,a(2))},function(c,e,a){var b=a(18),d=a(22);c.exports={trackDialogOpening:function(b){return d.trackEvent("dialog","opened",b)},trackDialogValidation:function(b){return d.trackEvent("dialog","validated",b)},trackDialogCancellation:function(b){return d.trackEvent("dialog","canceled",b)},trackPageInit:function(a){var c=
{dimension1:b.getUserData().getDomain(),dimension2:chrome.runtime.id,dimension3:chrome.runtime.getManifest().version};a&&(c.dimension4=a);d.trackPageview("/"+window.altirnao.context,c)}}},function(c,e,a){(function(b){function d(){Object.keys(localStorage).forEach(function(b){-1!=b.indexOf("awesomeDrive")&&localStorage.removeItem(b)})}function r(a,f,q,p){a=b.grep(Object.keys(a),function(b){return 0==b.indexOf("awesomeDrive.")&&b!=e.local.currentConfigOverride});chrome.storage.local.remove(a,function(){var a=
{};a[e.local.extVersion]=q;b.extend(a,m.getToursForVersion(f));chrome.storage.local.set(a,function(){p()})})}var l=a(5)("AwesomeDrive","LocalDataManager"),e=a(8),m=a(19),g,h={isUserDataLoaded:function(){return void 0!=g},getUserData:function(){g||(g=a(21)(window.altirnao.user));return g},clearCache:function(b){chrome.storage.local.get(function(a){var q=a[e.local.extVersion],p=chrome.runtime.getManifest().version;q!=p?(l.info("clearCache()","Extension updated from",q,"to",p),d(),r(a,q,p,b)):b()})},
dispose:function(){h.isUserDataLoaded()&&(g=void 0)}};c.exports=h}).call(e,a(2))},function(c,e,a){(function(b){var d=a(4);a(20);var r=a(8),e={"drive.google.com":{welcome:"3.0"}};c.exports={getToursForVersion:function(a){var c={};b.each(e,function(g,h){b.each(Object.keys(h),function(b,f){if(d.isNewerThan(e[g][f],a))return c[r.local.featureTour+"_"+g]=f,!1})});return c},openCachedTour:function(b,a){var c=r.local.featureTour+"_"+a;chrome.storage.local.get(c,function(d){d&&d[c]&&((d=b.getDialog(d[c]+
"Tour"))&&d.open(),chrome.storage.local.remove(r.local.featureTour+"_"+a))})}}}).call(e,a(2))},,function(c,e,a){function b(a){if(!(this instanceof b))return new b(a);var c={user:a?a.toLowerCase():a,domain:(a||"").split("@")[1],os:void 0};this.getUser=function(){return c.user};this.getDomain=function(){return c.domain};this.getUserDomainKey=function(){return c.user+"|"+c.domain};this.getOS=function(){return c.os};this.getMainDomain=function(){return c.domain};this.isUserDefined=function(){return!!c.user};
this.dump=function(){return c};this.isUserDefined()&&d.getOS(function(b){return c.os=b})}a(20);a(8);var d=a(22);c.exports=b},function(c,e,a){(function(b){function d(a){var q=k.getBackgroundPort();if(q){var p=function(f){f.action==a.action&&(a.log&&m.info(a.action+"()",a.log,f.response),b.isFunction(a.callback)&&a.callback(f.response),q.onMessage.removeListener(p))};q.onMessage.addListener(p);q.postMessage({action:a.action,data:a.data})}}function e(a){}function l(){var a=chrome.i18n.getMessage("extensionChanged");
h.onDisconnect.addListener(function(){h=void 0;window.altirnao&&window.altirnao.awesomeDrive&&window.altirnao.awesomeDrive.dispose();n(a)})}function n(a){g.show({key:a,noI18n:!0,error:!0,autoClose:!1});g.getContainer().off("click.awesomeDrive.applyChanges").on("click.awesomeDrive.applyChanges",".apply-ext-changes",function(a){a.preventDefault();window.location.reload()})}var m=a(5)("AwesomeDrive","BackgroundMessenger"),g=a(23),h,k={init:function(){k.dispose();k.getBackgroundPort().onMessage.addListener(e)},
dispose:function(){h&&h.onMessage.removeListener(e)},getBackgroundPort:function(){var a=window.altirnao.user;!h&&a&&(h=chrome.runtime.connect({name:a}))&&l();return h},postBackgroundMessage:function(a){d(a)},getOAuth2Token:function(a,b){d({action:"getOAuth2Token",data:{email:window.altirnao.user,checkValidity:void 0===b?!1:b},callback:a})},getOAuth2Info:function(a){d({action:"getOAuth2Info",data:{email:window.altirnao.user},callback:a})},sendTokenToDriveUtils:function(){d({action:"sendTokenToDriveUtils",
data:{email:window.altirnao.user}})},getOS:function(a){d({action:"getOS",callback:a,log:"Platform:"})},showNotification:function(a,b,p){d({action:"showNotification",data:{type:"basic",id:a,titleKey:b,contentKey:p}})},setPageActionIcon:function(a){d({action:"setPageActionIcon",data:{path:a}})},openTab:function(a,b){d({action:"openTab",callback:b,data:{url:a}})},trackPageview:function(a,b){k.sendGAnalyticsData("page",{page:a,extraData:b})},trackEvent:function(a,b,p,c,d){k.sendGAnalyticsData("event",
{category:a,action:b,label:p,value:c,extraData:d})},sendGAnalyticsData:function(a,b){d({action:"sendGAnalyticsData",data:{hitType:a,hitData:b}})}};c.exports=k}).call(e,a(2))},function(c,e,a){(function(b){function d(){h.on("click.awesomeDrive.notification.anchor","a[data-action]",function(a){var p=b(this),q=k[p.attr("data-action")];b.isFunction(q)&&(q(p),m.stopEventPropagation(a))})}function e(a){l(a);return a.hasOwnProperty("noI18n")&&a.noI18n?a.key:chrome.i18n.getMessage(a.key,a.placeholders)}function l(a){void 0!==
a.placeholders&&(a.placeholders=b.isArray(a.placeholders)?a.placeholders:[a.placeholders],a.placeholders=a.placeholders.map(function(a){return m.escapeHtmlTags(a)}))}function n(a){if(a.hasOwnProperty("autoClose")?a.autoClose:1)g=setTimeout(function(){h.fadeOut(600)},7E3)}var m=a(4),g,h=b('<div class="ao-awd-notification"><div><span class="ao-awd-close">&times;</span><span class="ao-awd-message"></span></div></div>'),k={openFolder:function(b){a(24).openFolder(b.attr("data-folderId"),b.attr("data-urlParams"),
b.attr("data-targetId"));f.hide()},switchToListView:function(){a(39).switchToListView()}},f={show:function(a){a="string"===typeof a?{key:a}:a;clearTimeout(g);h.data("initialized")||(b(".ao-awd-close",h).on("click.awesomeDrive.notification.close",f.hide),d(),h.data("initialized",!0));var p=a;b(".ao-awd-close",h).toggleClass("ao-hidden",p.hasOwnProperty("closeable")&&!p.closeable);p=a;h.toggleClass("ao-awd-err",p.hasOwnProperty("error")?p.error:!1).find(".ao-awd-message").removeData("key").data("key",
p.key&&!p.noI18n?p.key:void 0).html(e(p)).end().stop(!0,!0).prependTo("body").css("left","calc(50% - "+h.width()/2+"px)").show();n(a)},hide:function(){h.hide()},clear:function(){h.find(".ao-awd-message").html("").end().hide()},getContainer:function(){return h},isCurrentMessage:function(a){return h.find(".ao-awd-message").data("key")==a},dispose:function(){h.removeData("initialized").off(".notification").find(".ao-awd-close").off(".notification").end().remove()}};c.exports=f}).call(e,a(2))},function(c,
e,a){(function(b){function d(a){a&&b("["+m.docId+"="+a+"]").waitVisibility(!0,function(){var a=b(this);setTimeout(function(){a.click()},300)},100,10)}var e=a(3);a(20);var l=a(25),n=a(27),m=a(15),g=a(19);c.exports={openFolder:function(a,b,c){a=l.drive.getFolderUrl(a);return a!=document.URL?(history.pushState(null,"",a+(b||"")),window.dispatchEvent(new Event("popstate")),d(c),!0):!1},handleAODocsUrlParams:function(){g.openCachedTour(n,e.drive)}}}).call(e,a(2))},function(c,e,a){var b=a(3);a(20);var d=
a(26),r=new RegExp(".*/"+d.userAccountPath+"(\\d+)/"),l={drive:{getBaseUrl:function(){var a=l.getUserAccountNumber();return"https://"+b.drive+"/"+d.driveBasePath+(void 0!=a?d.userAccountPath+a+"/":"")},getFolderUrl:function(a){var b=a==d.myDrivePath?"":d.folderUrlPath;return l.drive.getBaseUrl()+b+a}},getUserAccountNumber:function(){var a=document.URL.match(r);return a&&a[1]?a[1]:void 0}};c.exports=l},function(c,e){c.exports={tooltip:"[role=tooltip]",headerContainer:"#gb",folderIdExtractor:/\/folders\/([^\/|#|\?]*)/,
driveBasePath:"drive/",userAccountPath:"u/",folderUrlPath:"folders/",myDrivePath:"my-drive",recentPath:"recent",searchPath:"search?q=",teamDriveHomePath:/\/drive\/(u\/\d+\/)?team-drives/}},function(c,e,a){c.exports=a(28)({require:a(30),dialogNames:["welcomeTour","installUfo","enableUfo","createOfficeFile"]})},function(c,e,a){(function(b){function d(){b(window).off("resize.awesomeDrive.dialogManager").on("resize.awesomeDrive.dialogManager",function(){!1!==g&&clearTimeout(g);g=setTimeout(function(){b.each(m,
function(a,b){if(b.isOpened())return b.center(),!1})},50)})}function e(a){return n.every(function(b){return-1!=a.indexOf(b)})}var l=a(5)("AwesomeDrive","DialogManager"),n=["require","dialogNames"],m={},g=!1;c.exports=function(a){var c=Object.keys(a||[]);if(!e(c))throw Error('The configuration is not valid for the dialog-manager for dialogs "'+a.dialogNames+'" (required config keys: '+n+")");d();return{getDialogs:function(){return m},getDialog:function(c){var d=m[c];if(!d)if(-1==b.inArray(c,a.dialogNames))l.info("getDialog()",
c,"is not a valid dialog name");else{try{d=a.require("./"+c+".js")}catch(p){throw c=Error('Cannot find module "./components"'),c.code="MODULE_NOT_FOUND",c;}d.create();m[c]=d}return d},isDialogOpened:function(a){a=m[a];return void 0!=a&&a.isOpened()},disposeDialogs:function(){b.each(m,function(a,b){b.dispose()});m={};b(window).off("resize.awesomeDrive.dialogManager")}}}}).call(e,a(2))},function(c,e){function a(a){throw Error("Cannot find module '"+a+"'.");}a.keys=function(){return[]};a.resolve=a;c.exports=
a;a.id=29},function(c,e,a){function b(b){return a(d(b))}function d(a){var b;if(!(b=r[a]))throw Error("Cannot find module '"+a+"'.");return b}var r={"./createOfficeFile.js":31,"./enableUfo.js":56,"./installUfo.js":57,"./welcomeTour.js":58};b.keys=function(){return Object.keys(r)};b.resolve=d;c.exports=b;b.id=30},function(c,e,a){(function(b){function d(a){a.stopPropagation();var p=b(a.currentTarget),c=q.getElement().find(".ao-awd-ok");c.prop("disabled",function(){return/^\s*$/.test(p.val())});13!==
a.which||c.is(":disabled")||c.click()}function e(){var a=b.trim(q.getElement().find(".ao-awd-office-file-name").val()),c=q.getData();l(c.folderId,a,c.officeSoftware);q.close();n.trackDialogValidation(q.name+"-"+c.officeSoftware)}function l(a,b,c){f.show({key:"newOfficeDocInProgress",placeholders:[b,c]});m.createOfficeDocument(a,b,c,function(a){f.show({key:"newOfficeDocSuccess",placeholders:[b]});if(k.isFeatureEnabled("openFile")){var p=h.getFeature("openFile");h.isFeatureInitialized("openFile")&&
p.isSupportedOs()&&(f.show({key:"newOfficeDocSuccessWebdav",placeholders:[b,c]}),p.open({id:a.id,type:c,category:g.category.MS_OFFICE},!0))}},function(){return f.show({key:"newOfficeDocFailed",error:!0,placeholders:[b,c]})})}a(32);var n=a(17),m=a(34),g=a(33),h=a(37),k=a(45),f=a(23),q=a(55)({name:"createOfficeFile",autoTrackOpening:!1,getContent:function(){return[b("<input>").attr("type","text").addClass("ao-awd-office-file-name").on("keyup.awesomeDrive.createOfficeFileDialog.filename",d),'<span class="office-file-ext">']},
getActions:function(){return b("<button>").addClass("ao-awd-btn ao-awd-ok").prop("disabled",!0).html(chrome.i18n.getMessage("create")).on("click.awesomeDrive.createOfficeFileDialog.validate",e)},beforeOpen:function(){var a=q.getData("officeSoftware"),b=q.getElement().find(".ao-awd-office-file-name");b.val("").attr("placeholder",chrome.i18n.getMessage(a+"DialogFileNameInputPlaceholder")).keyup().next(".office-file-ext").html(g[a].newFileExtension);setTimeout(function(){return b.focus()},10);n.trackDialogOpening(q.name+
"-"+a)}});c.exports=q}).call(e,a(2))},function(c,e,a){e=a(33);e={filesizeWarn:3E7,app:{word:{id:"word",win:{protocol:"ms-word:ofe%7Cu%7C",args:"$webdavUrl$",filetypes:[e.word.id]}},excel:{id:"excel",win:{protocol:"ms-excel:ofe%7Cu%7C",args:"$webdavUrl$",filetypes:[e.excel.id]}},powerpoint:{id:"powerpoint",win:{protocol:"ms-powerpoint:ofe%7Cu%7C",args:"$webdavUrl$",filetypes:[e.powerpoint.id]}},visio:{id:"visio",win:{protocol:"ms-visio:ofe%7Cu%7C",args:"$webdavUrl$",fileTypes:[e.visio.id]}},project:{id:"project",
win:{protocol:"ms-project:ofe%7Cu%7C",args:"$webdavUrl$",fileTypes:[e.project.id]}},publisher:{id:"publisher",win:{protocol:"ms-publisher:ofe%7Cu%7C",args:"$webdavUrl$",fileTypes:[e.publisher.id]}}}};e.app.word.mac=e.app.word.win;e.app.excel.mac=e.app.excel.win;e.app.powerpoint.mac=e.app.powerpoint.win;c.exports=e},function(c,e){var a={GOOGLE:"google",MS_OFFICE:"ms-office",UNKNOWN:"unknown"},b={folder:{id:"folder",category:a.GOOGLE},unknown:{id:"unknown",icon:/.*__.*\.png$/,category:a.UNKNOWN},unknownGoogle:{id:"unknown-google",
category:a.GOOGLE},word:{id:"word",icon:/.*_word_.*\.png$/,mimetype:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",newFileExtension:".docx",fileNamePattern:/.+\.docm$/,category:a.MS_OFFICE},excel:{id:"excel",icon:/.*_excel_.*\.png$/,mimetype:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",newFileExtension:".xlsx",fileNamePattern:/.+\.(xlsm|csv)$/,category:a.MS_OFFICE},powerpoint:{id:"powerpoint",icon:/.*_powerpoint_.*\.png$/,mimetype:"application/vnd.openxmlformats-officedocument.presentationml.presentation",
newFileExtension:".pptx",fileNamePattern:/.+\.pptm$/,category:a.MS_OFFICE},visio:{id:"visio",fileNamePattern:/.+\.vs(d|s|t|w|dx|sx|tx|wx)$/,category:a.MS_OFFICE},project:{id:"project",fileNamePattern:/.+\.mpp$/,category:a.MS_OFFICE},publisher:{id:"publisher",fileNamePattern:/.+\.pub$/,category:a.MS_OFFICE},executableFileExtension:/\.(ahk|bat|cmd|com|exe|lnk|msc|msi|ps1|py|reg|scr|csh|sh|ksh)$/,googleTypes:"folder spreadsheet document presentation form drawing map site script".split(" ")};b.nativeGoogleFileIcon=
new RegExp("_("+b.googleTypes.join("|")+")_|application\\/vnd\\.google-");b.category=a;c.exports=b},function(c,e,a){(function(b){function d(a,c,d,q){try{var p=n[d],f=p.newFileExtension,g=p.mimetype}catch(x){q(!1);return}var e={title:c+((new RegExp("\\"+f+"$")).test(c)?"":f),mimeType:g};a&&(e.parents=[{id:a}]);b.get(chrome.extension.getURL("/office-template/"+d+".txt")).done(function(a){a="\r\n---------314159265358979323846\r\nContent-Type: application/json\r\n\r\n"+JSON.stringify(e)+"\r\n---------314159265358979323846\r\nContent-Type: "+
g+"\r\nContent-Transfer-Encoding: base64\r\n\r\n"+a+"\r\n---------314159265358979323846--";q({url:"https://www.googleapis.com/upload/drive/v2/files",method:"POST",params:{uploadType:"multipart"},headers:{"Content-Type":'multipart/mixed; boundary="-------314159265358979323846"'},data:a})})}var e=a(4),l=a(5)("AwesomeDrive","DriveAPI"),n=a(33),m=a(35),g=a(36)({createOfficeDocument:function(a,c,f,q,p){var h={docName:c,parentFolder:a};l.info("createOfficeDocument()","Creating new",f,"document...",h);d(a,
c,f,function(a){a?(a.success=function(a){l.info("createOfficeDocument()","Successfully created",f,"document:",h);q(a)},a.error=function(a){var c=e.getRequestStatus(a);g.manageExpectedErrors(a,m.newFile)||(l.error("createOfficeDocument()","Failed to create",f,"document",h,c),b.isFunction(p)&&p(c))},g.execute(a,{supportsTeamDrives:!0},!0)):(l.error("createOfficeDocument()","Failed to create Office document: unsupported document type",f,h),b.isFunction(p)&&p())})}});c.exports=g}).call(e,a(2))},function(c,
e,a){var b=a(11);c.exports={init:{notRegisteredDomain:{status:403,match:function(a){return-1!=a.indexOf("not found in registered domains")}}},currentUser:{noDomain:{status:403,match:function(a){return-1!=a.indexOf("not found in registered domains")}},notAccessibleDomain:{status:403,match:function(a){return/The requested domain .* does not exist/.test(a)}},trialExpired:{status:403,match:function(a){return-1!=a.indexOf("TRIAL_EXPIRED")}},unauthenticated:{status:[503,401],match:function(a){return-1!=
a.indexOf("You must use oauth 2 to authenticate")}}},webdav:{tooLargeFile:{status:400,match:function(a){return-1!=a.indexOf("file is too big")},i18nKey:"webDavFailedTooLarge"},externalTooLargeFile:{status:413,match:function(a,c){return-1!=c.indexOf(b.apiUrls.driveUtils)},i18nKey:"webDavFailedTooLarge"},unauthorized:{status:403,match:function(a){return/You don't have (edit )?access/.test(a)},i18nKey:"webDavFailedUnauthorized"},externalQuotaReached:{status:403,match:function(a,c){return-1!=c.indexOf(b.apiUrls.driveUtils)},
i18nKey:"webDavExternalFailedQuota"}},importItem:{suspendedOwner:{status:400,match:function(a){return-1!=a.indexOf("SUSPENDED_OWNER")},i18nKey:"importFailedSuspendedOwner"},externalOwner:{status:400,match:function(a){return-1!=a.indexOf("EXTERNAL_OWNER")},i18nKey:"importFailedExternalOwner"},notOwned:{status:400,match:function(a){return-1!=a.indexOf("not owned or contains not owned files")||-1!=a.indexOf("we can only import owned files")||/can't be imported because .* not owned by the user/.test(a)},
i18nKey:"importFailedNotOwned"},tooManyFiles:{status:400,match:function(a){return-1!=a.indexOf("too many - more than 100 - files")},i18nKey:"importFailedTooManyFiles"},tooManyFolders:{status:400,match:function(a){return-1!=a.indexOf("too many - more than 10 - folders")},i18nKey:"importFailedTooManyFolders"},folderNotFound:{status:404,match:function(a){return-1!=a.indexOf("The folder does not exists")},i18nKey:"importFailedFolderNotFound"},unauthorized:{status:403}},newFile:{storageQuotaExceeded:{status:403,
match:function(a){return"The user has exceeded their Drive storage quota"==a},i18nKey:"storageQuotaExceeded"}}}},function(c,e,a){(function(b){function d(a){if(!(this instanceof d))return new d(a);Object.keys(a||[]).forEach(function(b){this[b]=a[b]},this)}var e=a(5)("AwesomeDrive","APIService"),l=a(8),n=a(11),m=a(22),g=a(23);d.prototype={execute:function(a,c,d){c=c||{};var q;a.hasOwnProperty("onErrorCodeZero")&&(q=a.onErrorCodeZero,delete a.onErrorCodeZero);m.getOAuth2Token(function(p){var f=a.error,
g=(d?a.url:(localStorage.getItem(l.html5.driveUtilsApiUrl)||n.apiUrls.driveUtils)+a.url)+(b.isEmptyObject(c)?"":"?"+b.param(c));b.extend(!0,a,{error:function(a){a.executionTime=a.startTime?(Date.now()-a.startTime)/1E3+"s":void 0;0!=a.status?f(a):(b.isFunction(q)&&q(),e.console(console.error,["execute()","Internet connection lost, preflight request failed or interrupted request"]))},beforeSend:function(a){a.setRequestHeader("Authorization","Bearer "+p.token);a.url=g;a.startTime=Date.now()},url:g});
b.ajax(a)})},manageExpectedErrors:function(a,c,d){var q=void 0,p=a.responseJSON&&a.responseJSON.error&&a.responseJSON.error.message?a.responseJSON.error.message:"";b.each(c||[],function(c,f){if((b.isArray(f.status)?-1!=b.inArray(a.status,f.status):a.status==f.status)&&(!b.isFunction(f.match)||f.match(p,a.url)))return f.i18nKey&&g.show({key:f.i18nKey,error:!0}),b.isFunction(f.callback)&&f.callback(d),q=c,!1});return q}};c.exports=d}).call(e,a(2))},function(c,e,a){(function(b){function d(){b(document).on("mouseenter.awesomeDrive.driveLine",
m.doclistLine,function(a){a=b(a.currentTarget);var c=b(a).find("["+m.docId+"]").parent().css("background-color");h.css("background-color",c&&"rgba(0, 0, 0, 0)"!==c?c:"");f.config.toggleLineContainer(a)})}function e(){b(document).on("mouseleave.awesomeDrive.driveLine",m.doclistContainer,function(){return f.config.hideLineContainer()})}function l(){b.each(f.getFeatures(),function(a,c){c.insert&&".ao-awd-line"===c.insert.target&&b.isFunction(c.manageToggle)&&c.manageToggle()})}var n=a(5)("AwesomeDrive",
"FeatureManager");a(20);a(33);var m=a(15),g=a(38),h=b('<div class="ao-awd-line ao-hidden"></div>'),k={},f=a(44)({require:a(46),featureNames:["createOfficeFile","openFile"],beforeInitFeatures:function(){k={};b("body").append(h);d();e()},afterInitFeatures:function(){return f.config.toggleLineContainer()},getDomChecks:function(){if(b.isEmptyObject(k))if(k={itemLine:!0,itemId:!0,itemName:!0,itemType:!0},0===b(m.doclistContainer).length)n.info("_performDomChecks()","DOM checks on item line not performed: no item list container found");
else{var a=b(m.doclistLine);if(0===a.length)n.info("_performDomChecks()","DOM checks on item line not performed: no item line found");else{var c=b(m.docNameWrapper,a),d=a.attr(m.docId),f=c.find(m.docName).html();k.itemLine=0!==c.length;k.itemId=void 0!==d&&""!==d;k.itemName=void 0!==f&&""!==f;k.itemType=0!==b(m.docIconsContainer,a).length}}return k},resetDomChecks:function(){return k={}},toggleLineContainer:function(a){a=a||g.getCurrentLine();void 0!==a&&g.isListViewMode()?(l(),a.find(m.docNameWrapper).append(h),
h.removeClass("ao-hidden")):h.addClass("ao-hidden")},hideLineContainer:function(){h.addClass("ao-hidden")},onDisposeFeatures:function(){h.remove();b(document).off(".driveLine")}});c.exports=f}).call(e,a(2))},function(c,e,a){(function(b){a(20);a(5)("AwesomeDrive","ContextManager");var d=a(26),e=a(39),l=a(42),n={init:function(){n.dispose();l.init();e.bindViewChange();n.initCurrentContext()},initCurrentContext:l.initCurrentItem,getCurrentLine:function(){return l.getLine()},getCurrentItem:function(){return l.getItem()},
getCurrentFolderDriveId:function(){var a=document.URL.match(d.folderIdExtractor);return a&&1<a.length?a[1]:void 0},isListViewMode:function(){return e.isListViewMode()},isTeamDriveHome:function(){return d.teamDriveHomePath.test(document.location.pathname)},dispose:function(){b(window).off(".currentFolder");l.dispose();e.dispose()}};c.exports=n}).call(e,a(2))},function(c,e,a){(function(b){function d(){(b(this).find(b(n.listViewBtn).get(0)).length||b(this).find(b(n.gridViewBtn).get(0)).length)&&f.checkViewType(!0)}
function e(){k="grid";g.push(b.map(["openFile"],function(a){return{type:m.error,target:"#"+a,key:"popupErrGridView"}}));h.show({key:"gridViewError",placeholders:chrome.i18n.getMessage("shortName"),autoClose:!1});l()}function l(){b(window).trigger("ao-view-mode-changed",{viewMode:k})}var n=a(15),m=a(40),g=a(41),h=a(23),k,f={bindViewChange:function(){b(document).on("mousedown.awesomeDrive.changeView",n.visibleTopActionsContainer+" "+n.actionButton,d)},checkViewType:function(a){b(a?n.gridViewBtn:n.listViewBtn).length?
e():(k="list",g.unpush("popupErrGridView"),h.isCurrentMessage("gridViewError")&&h.hide(),l())},isListViewMode:function(){void 0==k&&f.checkViewType(!1);return"list"==k},switchToListView:function(){var a=b(n.listViewBtn).get(0);a.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0}));a.dispatchEvent(new MouseEvent("mouseup",{bubbles:!0}));g.unpush("popupErrGridView")},dispose:function(){k=void 0;b(document).off(".changeView")}};c.exports=f}).call(e,a(2))},function(c,e){c.exports={warn:{css:"warn",
priority:0},error:{css:"err",priority:1},blocking:{css:"",priority:2}}},function(c,e,a){(function(b){function d(){h=new b.Deferred;k={};h.progress(function(a,b){k={key:a,placeholders:b};n()}).done(n).fail(function(a,b){q.push("blocking",".blocking",a,b)})}function e(a){h&&(void 0!==a&&!a||"pending"===h.state())||d();return h}function l(a,c,d,q){var p=!0;f=b.grep(f,function(b){b.target==c&&b.type.priority>=a.priority&&(p=!1);return b.target!=c||b.type.priority>=a.priority});p&&f.push({type:a,target:c,
key:d,placeholders:q?q:""})}function n(){b(window).trigger("statusUpdated.awesomeDrive")}var m=a(12),g=a(22),h,k={},f=[],q={initProgress:function(a,b){e().notify(a,b)},initSuccess:function(){e().resolve()},initFail:function(a,b){e().reject(a,b)},isInitPending:function(){return void 0!=h&&"pending"===h.state()},push:function(){1==arguments.length?(b.isArray(arguments[0])?arguments[0]:[arguments[0]]).forEach(function(a){l(a.type,a.target,a.key,a.placeholders)}):l(arguments[0],arguments[1],arguments[2],
arguments[3]);n()},unpush:function(a){if(0<f.length){var c=b.isArray(a),p=f.length;f=b.grep(f,function(b){return c?-1==a.indexOf(b.target)&&-1==a.indexOf(b.key):b.target!=a&&b.key!=a});f.length!=p&&n()}},getStatus:function(){var a=[];switch(e(!1).state()){case "pending":a.push(b.extend({target:".blocking"},b.isEmptyObject(k)?{key:"popupInitializing"}:k));break;case "rejected":a=f;g.setPageActionIcon(m.warnPageAction);break;case "resolved":a=f,0==f.length?g.setPageActionIcon(m.enabledPageAction):g.setPageActionIcon(m.warnPageAction)}return a},
reset:function(){f=[];g.setPageActionIcon(m.disabledPageAction)}};c.exports=q}).call(e,a(2))},function(c,e,a){(function(b){function d(){b(document).on("mouseenter.awesomeDrive.currentItem",l.doclistLine,function(a){return m=new n(b(a.currentTarget))})}function e(){b(document).on("mouseleave.awesomeDrive.currentItem",l.doclistContainer,function(){return m=null})}var l=a(15),n=a(43),m,g={init:function(){d();e()},initCurrentItem:function(){var a=g.getLine();m=a&&a.length?new n(a):null},getItem:function(){return m},
getLine:function(){var a=b(l.doclistLine).filter(function(a,c){return b(c).is(":hover")});return a.length?a:void 0},dispose:function(){b(document).off(".currentItem");m=void 0}};c.exports=g}).call(e,a(2))},function(c,e,a){(function(b,d){function e(a,b){var c=b.find(h.docIconsContainer);if(0<c.find(h.folderSVG+", "+h.sharedFolderSVG).length)return g.folder;var c=c.find("img").map(function(a,b){return d(b).attr("src")}),f=l(c);void 0===f&&(f=n(a,c));return f?f:g.unknown}function l(a){a=$jscomp.makeIterator(a);
for(var b=a.next();!b.done;b=a.next())if(b=b.value.match(g.nativeGoogleFileIcon),null!==b&&2===b.length)return(a=b[1])?{id:a}:g.unknownGoogle}function n(a,b){for(var c,d={},f=$jscomp.makeIterator(b),e=f.next();!e.done&&!(d.itemIconUrl=e.value,c=Object.keys(g).find(function(b){return function(c){c=g[c];var d=c.fileNamePattern;(d=!!d&&!!a&&null!==a.toLowerCase().match(d))||(c=c.icon,d=b.itemIconUrl,d=!!c&&!!d&&!!d.match(c));return d}}(d)));d={itemIconUrl:d.itemIconUrl},e=f.next());return g[c]}var m=
a(5)("AwesomeDrive","DriveItem"),g=a(33),h=a(15),k=function(a){a instanceof b?(this.id=a.attr(h.docId),this.name=a.find(h.docNameWrapper).find(h.docName).text(),a=e(this.name,a),this.type=a.id,a=a.category?a.category:g.googleTypes.includes(a.id)?g.category.GOOGLE:void 0,this.category=a):Object.assign(this,a);m.debug("constructor()",this)};k.prototype.isExecutable=function(){return g.executableFileExtension.test(this.name)};k.prototype.isFolder=function(){return this.type===g.folder.id};k.prototype.isNativeGoogleType=
function(){return!!this.category&&this.category===g.category.GOOGLE};k.prototype.isOfficeType=function(){return this.category===g.category.MS_OFFICE};c.exports=k}).call(e,a(2),a(2))},function(c,e,a){(function(b){function d(a){return k.every(function(b){return-1!=a.indexOf(b)})}function e(){f.config.flatFeatureNames=[];f.config.aliasedFeatureMap={};b.each(f.config.featureNames,function(a,c){b.isPlainObject(c)?b.each(c,function(a,b){f.config.aliasedFeatureMap[a]=b;f.config.flatFeatureNames=f.config.flatFeatureNames.concat(a,
b)}):f.config.flatFeatureNames.push(c)})}function l(a){var b=f.getMainFeatureName(a),b=g.getUserDomainSyncData().features[b];if(void 0==b||b){var b=f.config.require("./"+a+".js"),c=b.checkDom(f.config.getDomChecks());n.info("_initFeatures()","DOM valid for "+a+":",!c);c&&m.push(c);b.create();h[a]=b}}var n=a(5)("AwesomeDrive","FeatureManager"),m=a(41),g=a(45),h={},k=["require","featureNames","getDomChecks"];c.exports=function(a){var c=Object.keys(a||[]);if(!d(c))throw Error('The configuration is not valid for the feature-manager for features "'+
a.featureNames+'" (required config keys: '+k+")");f.config=b.extend(!0,{beforeInitFeatures:b.noop,afterInitFeatures:b.noop,onDisposeFeatures:b.noop},a);e();return f};var f={initFeatures:function(){b.isEmptyObject(h)||f.disposeFeatures();f.config.beforeInitFeatures();b.each(f.config.flatFeatureNames,function(a,b){l(b)});f.config.afterInitFeatures()},initFeature:function(a){h[a]&&(h[a].dispose(),delete h[a]);l(a)},getFeatures:function(){return h},getFeature:function(a){return h[a]},getAliasedFeatureNames:function(a){return f.config.aliasedFeatureMap[a]||
[]},getMainFeatureName:function(a){var c=a;b.each(f.config.aliasedFeatureMap,function(d,e){if(-1!=b.inArray(a,e))return c=d,!1});return c},isValidFeatureName:function(a){return f.config.flatFeatureNames.some(function(b){return a==b})},isFeatureInitialized:function(a){return void 0!=f.getFeature(a)},disposeFeatures:function(){b.each(h,function(a,b){b.dispose()});f.config.onDisposeFeatures();h={}}}}).call(e,a(2))},function(c,e,a){(function(b){var d,e;function l(a){var c=window.altirnao.user;chrome.storage.sync.get(c,
function(e){chrome.runtime.lastError?(g.error("loadSyncData()","Failed to load data from Chrome sync storage",chrome.runtime.lastError),a()):(b.extend(!0,k,e[c]),d=!0,n(a))})}function n(a){var c=(window.altirnao.user||"").split("@")[1],d=window.altirnao.user+"|"+c;chrome.storage.sync.get(d,function(c){chrome.runtime.lastError?g.error("_loadUserDomainSyncData()","Failed to load data from Chrome sync storage",chrome.runtime.lastError):(b.extend(!0,f,c[d]),e=!0);a()})}function m(a,b,c){var d={};d[a]=
b;chrome.storage.sync.set(d,function(){chrome.runtime.lastError?g.error("_persistSyncData()","Failed to persist",d,chrome.runtime.lastError):g.debug("_persistSyncData()","Successfully persisted key",d);c&&c(chrome.runtime.lastError)})}var g=a(5)("AwesomeDrive","SyncDataManager"),h=a(8),k=b.extend(!0,{},h.sync.user),f=b.extend(!0,{},h.sync.userDomain);e=d=!1;var q={loadSyncData:function(a){e=d=!1;window.altirnao.user?l(a):a()},isUserSyncDataLoaded:function(){return d},isUserDomainSyncDataLoaded:function(){return e},
getUserSyncData:function(){return k},getUserDomainSyncData:function(){return f},changeFeature:function(a,b){return f.features[a]=b},updateUfoReminder:function(a,b){k.ufoReminder=a;q.persistUserSyncData(b)},isFeatureEnabled:function(a){return!0===f.features[a]},isUfoReminderEnabled:function(){return k.ufoReminder},persistUserSyncData:function(a){m(window.altirnao.user,k,a)},persistUserDomainSyncData:function(a){m(window.altirnao.user+"|"+k.domain,f,a)}};c.exports=q}).call(e,a(2))},function(c,e,a){function b(b){return a(d(b))}
function d(a){var b;if(!(b=r[a]))throw Error("Cannot find module '"+a+"'.");return b}var r={"./createOfficeFile.js":47,"./openFile.js":49};b.keys=function(){return Object.keys(r)};b.resolve=d;c.exports=b;b.id=46},function(c,e,a){(function(b){function d(){var a=k.officeMenuConfig,c=new MutationObserver(function(c){if((c=c[0])&&c.addedNodes.length&&!b(c.addedNodes).filter(a.officeLineSelector).length){c=b(c.target);var d=c.find(a.officeLineSelector);d.length&&d.insertBefore(c.find(a.moreLine).last().closest(k.menuItem))}});
p.driveNewMenu||(p.driveNewMenu=new MutationObserver(function(d){d.forEach(function(d){d.addedNodes&&1==d.addedNodes.length&&b(d.addedNodes[0]).is(a.menuSelector)&&(l(b(d.addedNodes[0]),a),e(d.addedNodes[0],c))})}),p.driveNewMenu.observe(document.querySelector("body"),{childList:!0}),b("body > "+a.menuSelector).each(function(d,f){l(b(f),a);e(f,c)}))}function e(a,b){p.contextualMenuItem||(p.contextualMenuItem=[]);b.observe(a,{childList:!0,subtree:!0});p.contextualMenuItem.push(b)}function l(a,c){a.find(c.fileUploadLine).length&&
(a.find(c.moreLine).last().closest(k.menuItem).before(c.separatorLine,b.map([h.word.id,h.excel.id,h.powerpoint.id],function(d){return b(c.officeLineTemplate.replace("{{OfficeSoftware}}",d).replace("{{OfficeDoc}}",chrome.i18n.getMessage("new"+d+"MenuItem"))).toggleClass("ao-awd-disabled",3<=a.find(k.disabledMenuItem).length).click(function(){if(!b(this).hasClass("ao-awd-disabled")){var a=f.getDialog("createOfficeFile");a.isOpened()||(a.setData({officeSoftware:d,folderId:q.getCurrentFolderDriveId()}),
a.open())}})}),c.separatorLine),m(a),n(a))}function n(a){p.menuOpenStateChange||(p.menuOpenStateChange=[]);var b=new MutationObserver(function(){a.find(k.officeMenuConfig.officeLineSelector).toggleClass("ao-awd-disabled",3<=a.find(k.disabledMenuItem).length)});b.observe(a.get(0),{attributes:!0,attributeFilter:["aria-hidden"]});p.menuOpenStateChange.push(b)}function m(a){setTimeout(function(){var c=0;a.find(k.officeMenuConfig.officeLineSelector).each(function(a,d){c+=b(d).outerHeight(!0)});a.height(a.height()+
c)},300)}function g(){b.each(p,function(a,c){var d=b.isArray(c)?c:[c];b.each(d,function(a,b){b.disconnect()})});p={}}var h=a(33),k=a(15),f=a(27),q=a(38),p={},t=a(48)({name:"createOfficeFile",checkDom:function(){return null},init:function(){d()},onDispose:function(){b(k.officeMenuConfig.officeLineSelector).remove();g()}});c.exports=t}).call(e,a(2))},function(c,e,a){(function(b){function d(a){if(!(this instanceof d))return new d(a);var c=Object.keys(a||[]);if(!e(c))throw Error('The configuration is not valid for the feature "'+
a.name+'" (required config keys: '+n+")");this.onDispose=this.checkDom=b.noop;this.$elt=b();c.forEach(function(b){this[b]=a[b]},this)}function e(a){return n.every(function(b){return-1!=a.indexOf(b)})}var l=a(20),n=["name","init"];d.prototype={create:function(){if(this.insert)this.$elt.removeClass(l.hintClassName)[this.insert.method](this.insert.target);this.init()},show:function(){this.toggle(!0)},hide:function(){this.toggle(!1)},toggle:function(a){this.$elt.toggle(a)},dispose:function(){this.onDispose();
this.$elt.off(".awesomeDrive").remove()}};c.exports=d}).call(e,a(2))},function(c,e,a){(function(b){function d(){v.isSupportedOs()?(e(),z.warmup()):O.push({type:A.error,target:"#"+v.name,key:"webDavUnsupportedOS"})}function e(){v.$elt.on("click.awesomeDrive.openFile",function(a){var b=F.getCurrentItem();a.preventDefault();a.stopPropagation();l(b,!1,a.shiftKey)})}function l(a,b,c){var d=a.id;Object.keys(B).includes(d)?t.debug("openFile()","File "+d+" opening is already in progress..."):(B[d]={driveItem:a,
isNew:b,readOnly:c},H?n(d):D.checkExtensionInstall(x.ufoExtensionId,"images/extension/ufo-16.png",function(){return n(d)},function(){g(d,"installUfo")}))}function n(a){H=!0;K?m(a):D.checkExtensionEnable(x.ufoExtensionId,function(){return m(a)},function(){g(a,"enableUfo")})}function m(a){K=!0;k(a)}function g(a,b){B[a].driveItem.isOfficeType()?h(a):(E.getDialog(b).open(),f(a))}function h(a){var b=B[a].driveItem,c=I.getUserData().getOS();if(v.isSupportedOs()){var d=y.app[b.type][c];G.getWebDavUrl(a,
B[a].isNew,function(b){N.attr("src",d.protocol+b).appendTo("body");L.show({key:"webdavOpened"});f(a)},function(b,c){L.show({key:b,error:c});c&&f(a)});u.trackInlineButtonClick(v.name+"OfficeUriScheme")}else t.warn("_openWithOfficeScheme()",'Unsupported OS "'+c+'" to open file with Office scheme:'),L.show({key:"webDavUnsupportedOS",error:!0}),f(a)}function k(a){var b=B[a];z.openAndWatch(a,b.readOnly)["catch"](function(){K=H=!1;l(b.driveItem,b.isNew,b.readOnly)});f(a);u.trackInlineButtonClick(v.name+
"Ufo")}function f(a){a&&delete B[a]}var q=a(12),p=a(20),t=a(5)("AwesomeDrive","OpenFile"),u=a(50);a(33);var C=a(43),x=a(11),A=a(40),w=a(51),y=a(32),z=a(52),D=a(53),O=a(41),E=a(27),G=a(54),F=a(38),M=a(45),I=a(18),J=a(22),L=a(23),N=b('<iframe class="ao-awd-office-file-opening-frame"></iframe>'),H=!1,K=!1,B={},v=a(48)({name:"openFile",$elt:b('<button type="button" class="ao-awd-btn ao-awd-btn-link ao-awd-open-file">'+q.openFile+"</button>").attr(p.hintAttrName,chrome.i18n.getMessage("openFileTooltip")),
insert:{method:"appendTo",target:".ao-awd-line"},checkDom:function(a){return a.itemLine&&a.itemType?null:{type:A.warn,target:"#"+v.name,key:"popupWarnDOM"}},init:function(){void 0===I.getUserData().getOS()?J.getOS(d):d()},isSupportedOs:function(){return w.isSupportedOs(I.getUserData().getOS())},manageToggle:function(){v.hide();var a;if(a=M.isFeatureEnabled(v.name)&&v.isSupportedOs())a=F.getCurrentItem(),a=!!a&&(a.isOfficeType()||H||M.isUfoReminderEnabled())&&!F.isTeamDriveHome()&&!a.isExecutable()&&
!a.isFolder()&&!a.isNativeGoogleType();a&&v.show()},open:function(a,b,c){b=void 0===b?!1:b;c=void 0===c?!1:c;l(new C(a),b,c)},onDispose:function(){N.remove();z.dispose()}});c.exports=v}).call(e,a(2))},function(c,e,a){var b=a(22);c.exports={trackInlineButtonClick:function(a){return b.trackEvent("inline-button","clicked",a)}}},function(c,e,a){var b=a(7);c.exports={isSupportedOs:function(a){return a===b.os.windows||a===b.os.mac}}},function(c,e,a){function b(){r.info("_openConnection()","Opening a long lived connection with UFO");
g=chrome.runtime.connect(l.ufoExtensionId,{name:"awesomedrive"});g.onDisconnect.addListener(function(){r.info("onDisconnect()","Long lived connection with UFO has been closed");g=null})}function d(a){a=Math.max(a.accessTokenDate+1E3*a.expiresIn-Date.now()-6E5,5E3);var b=new Date(Date.now()+a);r.info("_scheduleRegisterToken()","Next registerToken will occur at",b);clearTimeout(h);h=setTimeout(function(){k.registerToken().then(function(){r.debug("_scheduleRegisterToken()","registerToken message sent to UFO")},
function(){r.warn("_scheduleRegisterToken()","registerToken message not sent to UFO")})},a)}var r=a(5)("AwesomeDrive","UfoMessenger"),l=a(11),n=a(18),m=a(22),g=null,h,k=function(){};k.warmup=function(){k.registerToken(!0)["catch"](function(){})};k.openConnection=function(a){a=void 0===a?!0:a;return new Promise(function(c,d){g?c(g):(b(),a?k.registerToken(!0).then(c,d):g?c(g):d())})};k.registerToken=function(a){a=void 0===a?!1:a;return new Promise(function(b,c){k.openConnection(!1).then(function(){m.getOAuth2Info(function(e){e=
e.oauth2Info;g&&e?(g.postMessage({handler:"registerToken",message:{firstAuth:a,tokeninfo:{email:n.getUserData().getUser(),scope:e.apiScope},authResult:{access_token:e.accessToken,expires_at:e.accessTokenDate+e.expiresIn}}}),r.debug("registerToken()","registerToken message sent to UFO"),d(e),b(g)):c()})},c)})};k.openAndWatch=function(a,b){b=void 0===b?!1:b;return new Promise(function(c,d){k.openConnection().then(function(){if(g){var e={fileId:a,readOnly:b};g.postMessage({handler:"openAndWatch",message:e});
r.debug("openAndWatch()","openAndWatch message sent to UFO for file",e);c()}else d()},d)})};k.dispose=function(){clearTimeout(h)};c.exports=k},function(c,e,a){function b(a,b,c,e){if(chrome.runtime.id===c)return!1;var g=new Promise(function(a,f){fetch(r.getExtensionUrl(c)+"/manifest.json").then(function(){return f({id:c,name:d.name[b]+" - "+e})},a)});a.push(g);return!0}a(5)("AwesomeDrive","WebstoreUtils");var d=a(7),r=function(){};r.checkExtensionInstall=function(a,b,c,d){var e=new Image;e.src=r.getExtensionUrl(a)+
"/"+b+"?q="+Date.now();e.onload=c;e.onerror=d};r.checkExtensionEnable=function(a,b,c){fetch(r.getExtensionUrl(a)+"/manifest.json").then(b,c)};r.isNoIncompatibleExtensionActive=function(){var a=[];return new Promise(function(c,e){Object.keys(d.id).every(function(c){var e=!0,g=d.id[c];Object.keys(g).every(function(d){return e=b(a,c,d,g[d])});return e});Promise.all(a).then(c,e)})};r.getExtensionUrl=function(a,b){return void 0===b||b?"chrome-extension://"+a:"https://chrome.google.com/webstore/detail/"+
a};r.getExtensionManagementUrl=function(a){return"chrome://extensions/"+(a?"?id="+a:"")};c.exports=r},function(c,e,a){(function(b){function d(){var a=g;g={};b.each(a,function(a,b){1E4>Date.now()-b.timestamp&&(g[a]=b)})}var e=a(4),l=a(5)("AwesomeDrive","driveUtilsAPI"),n=a(32),m=a(18),g={},h=a(36)({getWebDavUrl:function(a,b,c,p){l.info("getWebDavUrl()","Retrieving webdav url for file",a);15<Object.keys(g).length&&d();var f=a+"|"+m.getUserData().getUser(),q=g[f];if(q){if(1E4>Date.now()-q.timestamp){l.info("getWebDavUrl()",
"Webdav url retrieved from cache for file "+a+": "+q.url);c(q.url);return}l.info("getWebDavUrl()","Webdav url cached expired for file",a);delete g[f]}h.execute({type:"POST",url:"/webdav/"+a+(b?"?newFile=true":""),success:function(b){l.info("getWebDavUrl()","Webdav url received for file",a,":",{url:b.url,size:b.fileSize,editable:b.editable});b.editable?b.fileSize>n.filesizeWarn?p("webDavSizeWarning",!1):g[f]={timestamp:Date.now(),url:b.url}:p("webDavNoEditRights",!1);c(b.url)},error:function(b){b=
e.getRequestStatus(b);var c=!0;switch(b.status){case 400:b.responseJson&&"malformedName"===b.responseJson.error.message&&(l.warn("getWebDavUrl()","Failed to open file",a,": file name is malformed"),p("webdavMalformedName",!0),c=!1);break;case 413:l.warn("getWebDavUrl()","File too big",b);p("webdavFailedTooLarge",!0);c=!1;break;case 403:-1!==b.responseText.indexOf("reach quota for WEBDAV")&&(l.warn("getWebDavUrl()","Quotas reached for user",b),p("webDavQuotasError",!0),c=!1)}c&&(l.error("getWebDavUrl()",
"Failed to retrieve webdav url for file",a,b),p("webDavFailed",!0))}},{})}});c.exports=h}).call(e,a(2))},function(c,e,a){(function(b){function d(a){if(!(this instanceof d))return new d(a);var c=Object.keys(a||[]);if(!e(c))throw Error('The configuration is not valid for the dialog "'+a.name+'" (required config keys: '+f+")");this.onDispose=this.getActions=this.beforeOpen=this.onCreated=b.noop;this.autoTrackOpening=this.cancelButton=!0;c.forEach(function(b){this[b]=a[b]},this)}function e(a){return f.every(function(b){return-1!==
a.indexOf(b)})}function l(a){return b("<span>").addClass("ao-awd-close-tick").html("&times;").on("click.awesomeDrive.closeDialog",function(){return g(a)})}function n(a){a=a.getNotes?a.getNotes():null;if(!a)return null;var c=b("<div>").addClass("ao-awd-note").append(chrome.i18n.getMessage("dialogNotesTitle")).append(" ");c.append(b.isArray(a)&&1<a.length?b("<ul>").append(b.map(a,function(a){return"<li>"+a+"</li>"})):a);return c}function m(a){return b("<button>").addClass("ao-awd-btn ao-awd-cancel").html(chrome.i18n.getMessage("cancel")).on("click.awesomeDrive.closeDialog",
function(){return g(a)})}function g(a){a.isOpened()&&(a.getElement().addClass("ao-awd-dialog-closing"),setTimeout(function(){a.getElement().get(0).close();a.getElement().removeClass("ao-awd-dialog-closing")},200))}var h=a(5)("AwesomeDrive","Dialog"),k=a(17),f=["name","getContent"];d.prototype={create:function(){this.isCreated()||(this.$dialog=b("<dialog>").addClass("ao-awd-dialog ui-front ao-awd-"+this.name+"-dialog").append(b("<div>").addClass("ao-awd-dialog-title").append(this.titleIcon,"<span>"+
chrome.i18n.getMessage(this.name+"DialogTitle")+"</span>",l(this)),b("<div>").addClass("ao-awd-dialog-content").append(this.getContent()).append(n(this)),b("<div>").addClass("ao-awd-actions").append(this.cancelButton?m(this):void 0,this.getActions())),b("body").append(this.$dialog),this.onCreated());return this},center:function(){this.$dialog.css({top:(b("body").height()-this.$dialog.outerHeight())/2});return this},open:function(){this.isCreated()&&!this.isOpened()&&(this.autoTrackOpening&&k.trackDialogOpening(this.name),
this.beforeOpen(),this.center(),this.$dialog.get(0).showModal());return this},close:function(){g(this);return this},getElement:function(){return this.$dialog},getData:function(a){if(this.isCreated())return a?this.$dialog.data(a):this.$dialog.data()},setData:function(){if(this.isCreated())a:{var a=this.$dialog,c=arguments;if(1===c.length){var d=c[0];if(b.isPlainObject(d)){a.data(d);break a}}else if(2===c.length){a.data(c[0],c[1]);break a}h.error("_setData()","Invalid data argument:",c)}return this},
removeData:function(){this.isCreated()&&this.$dialog.removeData();return this},isCreated:function(){return void 0!==this.$dialog},isOpened:function(){return this.isCreated()&&void 0!==this.$dialog.attr("open")},dispose:function(){this.onDispose();this.$dialog.remove();this.$dialog=void 0}};c.exports=d}).call(e,a(2))},function(c,e,a){(function(b){function d(){return b('<div class="ao-awd-enable-ufo-instructions">').html(chrome.i18n.getMessage("enableUfoDialogInstructions")).find(".extensions-settings").click(function(){m.openTab(n.getExtensionManagementUrl(l.ufoExtensionId));
g.close();e.trackDialogValidation(g.name)}).end()}var e=a(17),l=a(11),n=a(53),m=a(22),g=a(55)({name:"enableUfo",cancelButton:!1,titleIcon:'<img src="'+chrome.extension.getURL("img/extension/ufo-logo.svg")+'"/>',getContent:function(){return[b('<div class="ao-awd-enable-ufo-intro">').html(chrome.i18n.getMessage("enableUfoDialogIntro")),d()]},getActions:function(){return b("<button>").addClass("ao-awd-btn ao-awd-ok").html(chrome.i18n.getMessage("close")).on("click.awesomeDrive.enableUfoDialog.validate",
function(){return g.close()})}});c.exports=g}).call(e,a(2))},function(c,e,a){(function(b){function d(){return b('<button class="ao-awd-btn">').attr(n.hintAttrName,chrome.i18n.getMessage("installUfoDialogTooltip",chrome.runtime.getURL("img/extension/awesome-drive-16.png"))).attr(n.hintDelayAttrName,0).html(chrome.i18n.getMessage("installUfoDialogNeverButton")).on("click.awesomedrive.installUfoDialog.never",function(){k.updateUfoReminder(!1,f.close.bind(f));m.trackDialogCancellation(f.name+"-never")})}
function e(){return b('<button class="ao-awd-btn">').html(chrome.i18n.getMessage("installUfoDialogDisagreeButton")).on("click.awesomedrive.installUfoDialog.no",function(){f.close();m.trackDialogCancellation(f.name+"-no")})}function l(){return b('<button class="ao-awd-btn ao-awd-ok">').html(chrome.i18n.getMessage("installUfoDialogAgreeButton")).on("click.awesomedrive.installUfoDialog.yes",function(){window.open(h.getExtensionUrl(g.ufoExtensionId,!1),"_blank");f.close();m.trackDialogValidation(f.name)})}
var n=a(20),m=a(17),g=a(11),h=a(53),k=a(45),f=a(55)({name:"installUfo",cancelButton:!1,titleIcon:'<img src="'+chrome.extension.getURL("img/extension/ufo-logo.svg")+'"/>',getContent:function(){return[b('<div class="ao-awd-install-ufo-intro">').html(chrome.i18n.getMessage("installUfoDialogIntro")),b('<div class="ao-awd-install-ufo-feature-list">').html(chrome.i18n.getMessage("installUfoDialogFeatureList")),b('<div class="ao-awd-install-ufo-improvement-list">').html(chrome.i18n.getMessage("installUfoDialogImprovementList")),
b('<div class="ao-awd-install-ufo-question">').html(chrome.i18n.getMessage("installUfoDialogQuestion")),b('<div class="ao-awd-install-ufo-pricing">').html(chrome.i18n.getMessage("installUfoDialogPricing")),b('<span class="ao-awd-install-ufo-more"><a href="'+n.kb.ufo+'" target="_blank">'+(chrome.i18n.getMessage("installUfoDialogLearnMore")+"</a></span>"))]},getActions:function(){return[d(),e(),l()]}});c.exports=f}).call(e,a(2))},function(c,e,a){(function(b){var d=a(15);c.exports=a(59)({tourName:"welcome",
steps:{1:{name:"welcome"},2:{name:"createOffice",highlight:function(){return b(d.newBtn).addClass("ao-awd-tour-new-btn")}},3:{name:"openFile"},4:{name:"pageAction"}}})}).call(e,a(2))},function(c,e,a){(function(b){var d=a(11);c.exports=function(c){function e(a){return b("<ul>").attr("tour",a)}function n(a,c){return b("<div>").addClass("ao-awd-preview").append(b("<div>").addClass("ao-hidden").append(m(a,c)))}function m(a,c){return b("<img>").toggleClass("ao-awd-fullsize",!0===c.fullsizeImg).attr("src",
d.gcsBucketUrl+"/feature-tour/"+a+"/"+c.name+".gif")}function g(a,c){return b("<div>").addClass("ao-awd-content ao-hidden").append(h(a,c),k(a,c))}function h(a,c){return b("<h2>").html(chrome.i18n.getMessage(a+c.name+"Title"))}function k(a,c){return b("<div>").html(chrome.i18n.getMessage(a+c.name+"Text"))}function f(a){a.off("jcarousel:targetin").on("jcarousel:targetin","li",function(d){d=b(d.currentTarget);var e=d.attr("step");A(a,e,c.steps[e].highlight);d.find(".ao-awd-preview > div, .ao-awd-content").removeClass("ao-hidden")})}
function q(a){a.off("jcarousel:targetout").on("jcarousel:targetout","li",function(c){c=b(c.currentTarget);w(a,c.attr("step"));c.find(".ao-awd-preview > div, .ao-awd-content").addClass("ao-hidden")})}function p(a){b(document).on("keyup.awesomeDrive.featureTour",function(b){if(37===b.which||39===b.which)a.find(".ao-awd-feature-tour-wrapper").jcarousel("scroll",(37===b.which?"-":"+")+"=1"),b.stopPropagation()})}function r(a){b(window).on("resize.awesomeDrive.featureTour",function(){var d=a.find(".bouncing-arrow").closest("[step-highlight]").hide().attr("step-highlight");
d&&(!1!==z&&clearTimeout(z),z=setTimeout(function(){var e=c.steps[d].highlight;e&&(b("[step-highlight="+d+"]").remove(),A(a,d,e))},50))})}function u(a){a.one("close.awesomeDrive.featureTour",function(){y();a.find(".ao-awd-feature-tour-wrapper").jcarousel("destroy");w(a);(c.onClose||b.noop)()})}function C(a){b.each([".ao-awd-feature-tour-prev",".ao-awd-feature-tour-next"],function(c,d){a.find(d).off("jcarouselcontrol:active jcarouselcontrol:inactive").on("jcarouselcontrol:active",function(a){return b(a.currentTarget).removeClass("inactive")}).on("jcarouselcontrol:inactive",
function(a){return b(a.currentTarget).addClass("inactive")}).jcarouselControl({target:(b(d).is(".ao-awd-feature-tour-prev")?"-":"+")+"=1"})})}function x(a){a.find(".ao-awd-feature-tour-pagination").off("jcarouselpagination:active jcarouselpagination:inactive").on("jcarouselpagination:active","a",function(a){return b(a.currentTarget).addClass("ao-awd-active")}).on("jcarouselpagination:inactive","a",function(a){return b(a.currentTarget).removeClass("ao-awd-active")}).jcarouselPagination({item:function(){return"<a></a>"}})}
function A(a,c,d){void 0!==d&&setTimeout(function(){var e=b.isFunction(d)?d():b(d);if(e.length&&e.is(":visible")){var f=e.offset(),g=a.offset();a.append(e.clone().attr("step-highlight",c).css({top:f.top-g.top,left:f.left-g.left,width:e.outerWidth()}).append('<div class="bouncing-arrow"></div>'))}},0)}function w(a,d){var e=2===arguments.length?[d]:Object.keys(c.steps);b.each(e,function(b,d){c.steps[d].highlight&&a.find("[step-highlight="+d+"]").remove()})}function y(){b(document).off("keyup.awesomeDrive.featureTour");
b(window).off("resize.awesomeDrive.featureTour")}var z=!1,D=a(55)({name:c.tourName+"Tour",getContent:function(){var a=b.map(c.steps,function(a,d){var e=c.tourName;return b("<li>").attr("step",d).attr("stepName",a.name).append(n(e,a),g(e,a))});return b("<div>").addClass("ao-awd-feature-tour-wrapper").append(e(c.tourName).append(a))},getActions:function(){return[b("<button>").attr("type","button").addClass("ao-awd-feature-tour-prev ao-awd-feature-tour-nav"),b("<span>").addClass("ao-awd-feature-tour-pagination"),
b("<button>").attr("type","button").addClass("ao-awd-feature-tour-next ao-awd-feature-tour-nav")]},beforeOpen:function(){var a=D.getElement().addClass("ao-awd-featureTour-dialog");a.find("li:first").append('<a href=""></a>');f(a);q(a);p(a);r(a);u(a);a.find("ul").css("left","-1px");setTimeout(function(){a.find(".ao-awd-feature-tour-wrapper").jcarousel();C(a);x(a)},0)},onDispose:function(){return y()}});return D}}).call(e,a(2))},function(c,e,a){(function(b){function d(){b(document).off("mouseenter.awesomeDrive.tooltip").on("mouseenter.awesomeDrive.tooltip",
"["+q.hintAttrName+"]:not(."+q.hintClassName+")",function(){var a=b(this);setTimeout(function(){l(a,!0)},0)})}function e(){t.newTooltip||(t.newTooltip=new MutationObserver(function(a){a.forEach(function(a){a.addedNodes&&1==a.addedNodes.length&&(a=b(a.addedNodes[0]),a.is(p.tooltip+":not(.ui-tooltip)")&&a.toggleClass("ao-hidden",0<b(".ui-tooltip").length))})}),t.newTooltip.observe(document.querySelector("body"),{childList:!0}))}function l(a,b){a.tooltip({create:n,open:m,close:g,content:k,items:"["+
q.hintAttrName+"]",show:!1,hide:!1,position:f(),tooltipClass:"ao-awd-tooltip"}).addClass(q.hintClassName).click(h);b&&a.tooltip("open")}function n(a){a=b(a.target);a.tooltip("option","show",{effect:"show",delay:a.attr(q.hintDelayAttrName)||500})}function m(a,c){b(p.tooltip+":not(.ui-tooltip)").addClass("ao-hidden");b("[role=log].ui-helper-hidden-accessible").remove();var d=c.tooltip;if(b("dialog").is("[open]")){var e=b(a.target);d.appendTo(b("dialog[open]")).removeAttr("style").position(b.extend(f(),
{of:e})).hide().show(e.attr(q.hintDelayAttrName)||500)}b(c.tooltip).siblings(".ui-tooltip").remove()}function g(){b(p.tooltip+":not(.ui-tooltip)").removeClass("ao-hidden")}function h(){var a=b(this);a.is(":ui-tooltip")&&a.tooltip("option","hide",!1).tooltip("close").tooltip("option","hide",{effect:"fadeOut",duration:100,delay:75})}function k(){return b("<span>").html(b(this).attr(q.hintAttrName))}function f(){return{my:"center top",at:"center bottom"}}var q=a(20),p=a(26),t={};c.exports={initTooltips:function(){l(b("["+
q.hintAttrName+"]"),!1);d();e()},dispose:function(){b(document).off(".tooltip");b.each(t,function(a,b){b.disconnect()});t={}}}}).call(e,a(2))},function(c,e,a){(function(b){a(5)("AwesomeDrive","WindowMessenger");var d=a(38),e=a(37),l=a(62)({onLocationChanged:function(){d.initCurrentContext();b(window).trigger("hashchange.awesomeDrive");e.config.toggleLineContainer()},onExternalPageMessage:function(a){}});c.exports=l}).call(e,a(2))},function(c,e,a){(function(a){var b=chrome.runtime.id;c.exports=function(c){function d(a){}
return{init:function(){a(window).off("message.awesomeDrive ao-location-changed-"+b).on("message.awesomeDrive",d).on("ao-location-changed-"+b,c.onLocationChanged||a.noop)},dispose:function(){a(window).off("message.awesomeDrive")}}}}).call(e,a(2))},function(c,e,a){(function(b){function d(a,b,c){if("page-action"===a.from)switch(a.action){case "getStatus":c(m());break;case "reload":window.altirnao.awesomeDrive.reload();break;case "getSyncData":a=t.getUserData();c(a.isUserDefined()?{userDomainSyncData:{key:a.getUserDomainKey(),
value:p.getUserDomainSyncData()}}:void 0);break;case "installUfo":k.checkExtensionInstall(h.ufoExtensionId,"images/extension/ufo-16.png",function(){k.checkExtensionEnable(h.ufoExtensionId,e,l)},e);break;case "openAwesomeDriveTour":(c=q.getDialog("welcomeTour"))&&c.open();break;default:g.error("_onPopupMessageListener()","Unknown message from page-action:",a)}}function e(){p.updateUfoReminder(!0);q.getDialog("installUfo").open()}function l(){q.getDialog("enableUfo").open()}function n(a,c,d){window.altirnao.awesomeDrive&&
window.altirnao.awesomeDrive.isDisposed()||chrome.runtime.sendMessage({from:"content-script",action:a,data:c},function(a){return(d||b.noop)(a)})}function m(){return{statusData:f.getStatus(),features:p.getUserDomainSyncData().features,hiddenFeatures:window.altirnao.awesomeDrive?window.altirnao.awesomeDrive.getHiddenFeatures():[]}}var g=a(5)("AwesomeDrive","PageActionMessenger"),h=a(11),k=a(53),f=a(41),q=a(27),p=a(45),t=a(18),u={init:function(){u.dispose();chrome.runtime.onMessage.addListener(d);b(window).on("statusUpdated.awesomeDrive",
u.updateStatusPopup)},updateStatusPopup:function(){return n("updateStatus",m())},unblockSettingsPopup:function(){return n("unblockSettings")},dispose:function(){chrome.runtime.getManifest()&&chrome.runtime.onMessage.removeListener(d);b(window).off("statusUpdated.awesomeDrive")}};c.exports=u}).call(e,a(2))},function(c,e,a){(function(b){function d(a){g.isNoIncompatibleExtensionActive().then(function(){return l(a)})["catch"](function(b){a.pageActionMessenger.init();k.initFail("popupErrExtensionConflict",
b.name);n.info("_onIncompatibleExtensionActive()",b.name,"detected! AwesomeDrive will not initialize");m.trackPageInit(b.name+" ("+b.id+")")})}function e(){n.info("_onInvalidPage()","Page is not valid to initialize the extension")}function l(a){(a.beforeInit||b.noop)();f.init();h.init();b(function(){try{q.init(),b(window).on("instantiate-extension-"+chrome.runtime.id,function(c,d){var e=function(){return altirnao.awesomeDrive=a.extensionManager(d.email)};if(d.immediate)e();else b(a.wait.elementSelector)[a.wait.functionName](a.wait.functionParameter,
e,1E3)})}catch(t){n.error("onDOMReady()","Unexpected error occurred prior to extension initialization",t)}})}var n=a(5)("AwesomeDrive","Init"),m=a(17),g=a(53),h=a(65),k=a(41),f=a(66),q=a(67);window.altirnao=window.altirnao||{};c.exports=function(a){b(function(){a.isValidPage().then(function(){return d(a)})["catch"](e)})}}).call(e,a(2))},function(c,e,a){(function(b){function d(){chrome.storage.local.get(function(c){var d=c[k.local.currentConfigOverride];void 0!==d&&b.each(Object.keys(d),function(c,
e){var f;switch(e){case "drive":f=a(15);break;case "common":f=a(26);break;default:h.warn("Invalid override config key",e)}f&&b.extend(!0,f,d[e])});b.each(Object.keys(c),function(a,b){0===b.indexOf(k.local.configOverride)&&b!==k.local.currentConfigOverride&&chrome.storage.local.remove(b)})})}function e(){b.ajax({url:"https://storage.googleapis.com/awesomedrive/"+k.local.currentConfigOverride+".json",dataType:"json",cache:!1}).then(l,n)}function l(a){var b={};b[k.local.currentConfigOverride]=a;chrome.storage.local.set(b)}
function n(a){404!==a.status&&403!==a.status&&(0===a.status?h.console(console.error,["ConfigFetcher - _onConfigLoadFailed()","Internet connection lost, preflight request failed or interrupted request"]):h.error("_onConfigLoadFailed()","Could not load "+k.local.currentConfigOverride+".json from GCS",g.getRequestStatus(a)))}function m(){f&&window.clearInterval(f);var a="dispose-extension-"+chrome.runtime.id+".configFetcher";b(window).off(a).on(a,function(){f&&window.clearInterval(f)});f=setInterval(e,
q)}var g=a(4),h=a(5)("AwesomeDrive","ConfigFetcher"),k=a(8),f,q;c.exports={init:function(a){q=6E4*(a||15);d();e();m()}}}).call(e,a(2))},function(c,e,a){(function(b){function d(a,c){if("sync"==c){if(window.altirnao.awesomeDrive){var d=h.getUserData().getUserDomainKey();if(a[d]&&a[d].newValue&&(d=a[d],d=l.getChanges(d.oldValue||g.getUserDomainSyncData(),d.newValue),!b.isEmptyObject(d)&&d.features))window.altirnao.awesomeDrive.onFeatureChange(d.features)}}else"local"==c&&e(a)}function e(c){var d=c[m.local.currentConfigOverride];
void 0!=d&&(n.info("_onLocalStorageChange()","Override config loaded",d.newValue),b.each(Object.keys(d.newValue),function(c,e){var g;switch(e){case "drive":g=a(15);break;case "common":g=a(26);break;default:n.warn("Invalid override config key",e)}g&&b.extend(!0,g,d.newValue[e])}),window.altirnao.awesomeDrive&&window.altirnao.awesomeDrive.reload())}var l=a(4),n=a(5)("AwesomeDrive","StorageChangeListener"),m=a(8),g=a(45),h=a(18);c.exports={init:function(){chrome.storage.onChanged.removeListener(d);chrome.storage.onChanged.addListener(d)}}}).call(e,
a(2))},function(c,e,a){(function(b){function d(a){a.source===window&&(a=a.data)&&a.extension===m&&"userRetriever"===a.from&&(a.message.warn?(a=a.message.warn,l.warn("onDOMReady()",a.message,a.details)):(a.message.error&&l.error("onDOMReady()","Failed to retrieve current user, extension will not initialized",{error:a.message.error,dom:b(n.headerContainer).html()}),window.altirnao=window.altirnao||{},altirnao.user=a.message.email,b(window).trigger("instantiate-extension-"+m,{email:a.message.email})))}
var e=a(4);a(20);var l=a(5)("AwesomeDrive","UserRetrieverListener"),n=a(26),m=chrome.runtime.id;c.exports={init:function(){var a=chrome.runtime.getManifest();e.insertScript("/module/embedded/embedded.bundle.js",{id:m,name:a.name,version:a.version});window.addEventListener("message",d)}}}).call(e,a(2))}]);
}).call(this)

